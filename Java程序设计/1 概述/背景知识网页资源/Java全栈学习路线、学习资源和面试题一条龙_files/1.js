(window.HK3=window.HK3||[]).push([[1],{b6ec:function(e,t,n){(function(e){!function(t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var v=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()};function y(e,t){return v(e)===t.toLowerCase()}function k(e){return null==e}function w(e){return void 0===e}function _(e){return!!y(e,"Object")&&(null===Object.getPrototypeOf(e)||Object===e.constructor)}function C(e){return y(e,"Function")}function S(e){return y(e,"String")}function E(e){return y(e,"Array")}function j(e){return!0===e||!1===e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return k(e)?t:S(e)?e:String(e)}var I={name:"",version:""},O={opera:/Opera\/([\d.]+)/,firefox:/Firefox\/([\d.]+)/,ie:/MSIE\s([\d.]+)/,ie11:/Trident\/[\d](?=[^\?]+).*rv:([0-9.]+)/,edge:/Edge\/([\d.]+)/,chrome:/Chrome\/([\d.]+)/,safari:/Safari\/([\d.]+)/};function L(e){return O.opera.test(e)?"Opera":O.firefox.test(e)?"Firefox":O.ie.test(e)||O.ie11.test(e)?"IE":O.edge.test(e)?"Edge":O.chrome.test(e)?"Chrome":O.safari.test(e)?"Safari":"other"}var R=navigator.userAgent||"";I.name=L(R),I.version=function(e,t){var n="";switch(t=t||L(e)){case"Opera":case"Firefox":case"Edge":case"Chrome":case"Safari":var i=O[t.toLocaleLowerCase()].exec(e);n=i?i[1]:"";break;case"IE":var o=O.ie.exec(e)||O.ie11.exec(e);n=o?o[1]:""}return n}(R,I.name);var P={isDev:!0,isLogin:!1,userInfo:{},appid:"",threadId:"",commentCount:0,winHeight:window.innerHeight||document.documentElement.clientHeight,passStaticPage:"",isHigherBrowser:function(e){var t=I.name.toLocaleLowerCase();if(e.hasOwnProperty(t)){var n=e[t];return function(e,t){e=T(e,""),t=T(t,"");for(var n=e.split("."),i=t.split("."),o=0,a=Math.max(n.length,i.length);o<a;o++){if(n[o]&&!i[o]&&parseInt(n[o],10)>0||parseInt(n[o],10)>parseInt(i[o],10))return 1;if(i[o]&&!n[o]&&parseInt(i[o],10)>0||parseInt(n[o],10)<parseInt(i[o],10))return-1}return 0}(I.version,n)>-1}return!0}({ie:"11"}),hideToast:!1},D={thread_id:"",reply_id:"",start:0,num:20,appid:"",order:"12",inner_order:"9",use_list:"1",callback:"?"},A="https://ext.baidu.com",N={LIST1:"".concat(A,"/api/comment/v2/comment/list"),LIST2:"".concat(A,"/api/comment/v2/comment/detail"),UPDOWN:"".concat(A,"/api/comment/v1/comment/updown"),DELETE:"".concat(A,"/api/comment/v1/comment/delreply"),REPORT:"".concat(A,"/api/comment/v1/comment/report"),ADDREPLY:"".concat(A,"/api/comment/v1/comment/addreply")},H="正在加载...",z="加载失败，点击重新加载",M="查看更多评论",B="没有更多啦",K="网络不给力，请稍后重试",U=[{id:"4",text:"反动违法"},{id:"1",text:"色情低俗"},{id:"6",text:"谩骂攻击"},{id:"3",text:"营销广告"},{id:"9",text:"其他"}],q=function(e){return"".concat("https://author.baidu.com/home","?context=%7B%22uk%22%3A%22").concat(e,"%22%7D")},F={202:"参数错误，发送失败",701:"手速太快了，休息一下再试吧",872:"此评论暂无法回复",802:"发送失败，此内容暂不支持评论",880:"发表失败",890:"每天可发表5次图片评论",838:"由于对方设置，你无法进行该操作"},V=function(e,t,i){return new TypeError("Expected `"+e+"` to be of type `"+t+"`, got `"+n(i)+"`")},W=function(){function e(){i(this,e),this._events={}}return a(e,[{key:"on",value:function(e,t,n){if(!S(e))throw V("name","string",e);if(!C(t))throw V("callback","function",t);var i=this._events;return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this}},{key:"once",value:function(e,t,n){var i=this;function o(){i.off(e,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];t.apply(n,r)}return o._=t,this.on(e,o,n)}},{key:"emit",value:function(e){if(!S(e))throw V("name","string",e);for(var t=(this._events[e]||[]).slice(),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0,r=t.length;a<r;a++){var c=t[a],s=c.fn,l=c.ctx,d=void 0===l?null:l;s.apply(d,i)}return this}},{key:"off",value:function(e,t){var n=this._events,i=n[e];if(i&&i.length)if(w(t))delete n[e];else if(C(t)){for(var o=[],a=0,r=i.length;a<r;a++){var c=i[a].fn;c!==t&&c._!==t&&o.push(i[a])}o.length?n[e]=o:delete n[e]}return this}}]),e}(),$=function(){return new W},J=0,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return J++,(Date.now().toString(16)+J).slice(-1*e)},G="object"===("undefined"==typeof window?"undefined":n(window))?window:e,X=function(e){if("function"==typeof e){var t="_xfunc_".concat(Y());return G[t]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(G,n)},t}return e},Q=encodeURIComponent,Z=function(e){return Q(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(S(e))return e;var n=[];for(var i in e){var o=e[i];E(o)?o=JSON.stringify(te(o)):k(o)?o="":_(o)?o=JSON.stringify(o):C(o)&&(o=X(o)),n.push("".concat(i,"=").concat(t?Z(o):o))}return n.join("&")}function te(e){return e.map((function(e){switch(v(e)){case"string":return e;case"function":return X(e);default:return e}}))}var ne=function(){};function ie(e,t,n){var i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=document,c=e.replace(/^(css|img)!/,""),s=!1,l=n.async,d=void 0===l||l,p=n.maxTries,u=void 0===p?1:p,h=n.timeout,f=void 0===h?2e4:h,m=n.before,g=void 0===m?null:m,x=g;"function"!=typeof x&&(x=ne),/(^css!|\.css$)/.test(e)?(s=!0,(i=r.createElement("link")).rel="stylesheet",i.href=c):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(i=r.createElement("img")).src=c:((i=r.createElement("script")).src=e,i.async=!!d);var b=function(r){var c;if(clearTimeout(o),c=r instanceof Error?"e":r.type[0],s&&"hideFocus"in i)try{i.sheet.cssText.length||(c="e")}catch(e){c="e"}if("e"===c&&(a+=1)<u)return ie(e,t,n,a);i.onload=i.onerror=i.onbeforeload=null,i=null,t("e"===c?r||"error":null,e)};if(i.onload=i.onerror=b,!1!==x(e,i)){var v=r.head||r.getElementsByTagName("script")[0];v.appendChild(i),f>0&&(o=setTimeout((function(){b(new Error("timeout"))}),f))}}function oe(e){return y(e,"function")}function ae(e){var t=e.url,i=e.before,o=e.success,a=e.error,r=e.timeout,c=void 0===r?2e4:r,s=e.async,l=e.data,d=e.jsonpCallback,p=e.jsonpCallbackName;"object"===n(l)&&(l=ee(l)),l&&(t+=(-1===t.indexOf("?")?"?":"&")+l),t=t.replace(/[&?]{1,2}/,"?");var u,h=(oe(d)?d():d)||"_boxjsonp"+Y(),f=window[h];window[h]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u=t},p?t+="&"+p+"="+h:/=\?/.test(t)&&(t=t.replace(/=\?/,"="+h)),ie(t,(function(e,t){e?a(e,t):o(u&&u[0]),window[h]=f,u&&oe(f)&&f(u[0]),f=u=void 0}),{timeout:c,async:s,before:i})}var re=function(e,t,i){if("object"===n(e)){var o,a,r=function(e){var t;return t=null==e?String(e):(t=Object.prototype.toString.call(e).toLowerCase()).substring(8,t.length-1)}(e);if(i=i||e,"array"===r||"arguments"===r||"nodelist"===r){for(o=0,a=e.length;o<a;o++)if(!1===t.call(i,e[o],o,e))return}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(i,e[o],o,e))return}},ce=/^\.([\w-]+)$/,se=/^#([\w-]*)$/,le=/^[\w-]+$/,de={mouseenter:"mouseover",mouseleave:"mouseout"},pe={},ue=function(){return!0},he=function(){return!1},fe=/^([A-Z]|layer[XY]$)/,me={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function ge(e,t,n,i){return function(e,t,n,i,o,a){var r=be(e),c=pe[r]||(pe[r]=[]);_e(t,n,(function(t,n){var a=ye(t);a.fn=n,a.sel=i,a.e in de&&(n=function(e){var t=e.relatedTarget;if(!t||t!==this&&!je(this,t))return a.fn.apply(this,arguments)}),a.del=o&&o(n);var r=a.del||n;a.proxy=function(t){var n=r.apply(e,[t].concat(t.data));return!1===n&&(t.preventDefault(),t.stopPropagation()),n},a.i=c.length,c.push(a),"addEventListener"in e&&e.addEventListener(ke(a.e),a.proxy,we(a,void 0))}))}(e,n,i,t,(function(n){return function(i){var o,a=Ce(i.target,t,e);if(a){(o=ve(i)).currentTarget=a,o.liveFired=e;for(var r=arguments.length,c=new Array(r>1?r-1:0),s=1;s<r;s++)c[s-1]=arguments[s];return n.apply(a,[o].concat(c))}}}))}function xe(e,t,n,i){return function(e,t,n,i,o){var a=be(e);_e(t||"",n,(function(t,n){(function(e,t,n,i){var o,a,r=ye(t);return r.ns&&(a=r.ns,o=new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")),(pe[be(e)]||[]).filter((function(e){return e&&(!r.e||e.e===r.e)&&(!r.ns||o.test(e.ns))&&(!n||be(e.fn)===be(n))&&(!i||e.sel===i)}))})(e,t,n,i).forEach((function(t){delete pe[a][t.i],"removeEventListener"in e&&e.removeEventListener(ke(t.e),t.proxy,we(t,void 0))}))}))}(e,n,i,t)}function be(e){return e._bid||(e._bid=Y())}function ve(e){var t,n={originalEvent:e};for(t in e)fe.test(t)||void 0===e[t]||(n[t]=e[t]);return re(me,(function(t,i){n[i]=function(){return this[t]=ue,e[i].apply(e,arguments)},n[t]=he})),n}function ye(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function ke(e){return de[e]||e}function we(e,t){return e.del&&("focus"===e.e||"blur"===e.e)||!!t}function _e(e,t,n){e.split(/\s/).forEach((function(e){n(e,t)}))}function Ce(e,t,n){for(;e&&!Ee(e,t);)e=e!==n&&!Se(e)&&e.parentNode;return e}function Se(e){return null!=e&&e.nodeType===e.DOCUMENT_NODE}function Ee(e,t){if(!e||1!==e.nodeType)return!1;var n,i=e.webkitMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var o=e.parentNode,a=!o,r=document.createElement("div");return a&&(o=r).appendChild(e),n=~function(e,t){var n;return Se(e)&&se.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:Array.prototype.slice.call(ce.test(t)?e.getElementsByClassName(RegExp.$1):le.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))}(o,t).indexOf(e),a&&r.removeChild(e),n}function je(e,t){return e!==t&&e.contains(t)}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.x-avatar{position:relative;display:block;width:48px;height:48px}.x-avatar.is-small{width:39px;height:39px}.x-avatar-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-avatar-img{position:relative;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;border-radius:50%}.x-avatar-img:after{content:"";position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;width:300%;height:300%;border:3px solid rgba(0,0,0,.1);border-radius:100%;-webkit-transform:scale(.333333);transform:scale(.333333);-webkit-transform-origin:0 0;transform-origin:0 0}.x-avatar-vip{position:absolute;z-index:1;right:0;bottom:0;width:16.5px;height:16.5px;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.x-avatar .is-small-vip{width:13.2px;height:13.2px}.x-avatar .vip-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-1.png)}.x-avatar .vip-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-2.png)}.x-avatar .vip-3{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-3.png)}.x-avatar .vip-10{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-10.png)}');var Te=function(){function e(t){i(this,e),this.container=t.container,this.prefixCls="x-avatar",this.src=t.src,this.vip=t.vip,this.href=t.href,this.isSmall=t.isSmall,this.render()}return a(e,[{key:"render",value:function(){var e=document.createElement(this.href?"a":"div");e.classList.add("x-avatar",this.isSmall?"is-small":"x-avatar"),e.href=this.href;var t='\n            <div class="'.concat("x-avatar",'-placeholder"></div>\n            <div class="').concat("x-avatar",'-img" style="').concat(this.imgStyle(),'"></div>\n            ').concat(+this.vip?'<div class="'.concat("x-avatar","-vip vip-").concat(this.vip," ").concat(this.isSmall?"is-small-vip":"",'"></div>'):"","\n        ");e.innerHTML=t,this.container.appendChild(e)}},{key:"imgStyle",value:function(){return"background-image: url(".concat(this.src,")")}},{key:"updateSrc",value:function(e){this.src=e.src,this.container.querySelector(".".concat("x-avatar","-img")).style.backgroundImage="url(".concat(this.src,")")}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".user-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-family:PingFangSC-Regular}.user-bar-uname{font-family:PingFangSC-Semibold;font-size:13px;color:#222}.user-bar-lz{margin-left:4px;margin-right:-7px;padding:2px 2.67px;-webkit-transform:scale(.75);transform:scale(.75);-webkit-transform-origin:left center;transform-origin:left center;font-size:12px;line-height:1;color:#4e6ef2;border:1px solid rgba(78,110,242,.5);border-radius:3.25px;display:inline-block;font-family:initial;font-weight:400}.user-bar-dc{width:13px;height:13px;margin-left:4px;background-size:cover;background-position:50%;background-repeat:no-repeat}.user-bar-verified{padding-left:4px;font-size:13px;color:#626675;display:inline-block;max-width:200px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}");var Ie=function(){function e(t){i(this,e),this.uname=t.uname,this.isAuthor=!!+t.isAuthor,this.verified=t.verified,this.decorations=t.decorations||[],this.prefixCls="user-bar"}return a(e,[{key:"makeTpl",value:function(){var e=this.decorations;return'\n            <div class="'.concat("user-bar",'">\n                <h5 class="').concat("user-bar",'-uname">').concat(this.uname).concat(this.isAuthor?'<span class="'.concat("user-bar",'-lz">作者</span>'):"","</h5>\n                ").concat(e.length?e.map((function(e){return e.icon?'<span class="'.concat("user-bar",'-dc" style="background-image:url(').concat(e.icon,')"></span>'):""})).join(""):"","\n                ").concat(this.verified?'<span class="'.concat("user-bar",'-verified">').concat(this.verified,"</span>"):"","\n            </div>\n        ")}},{key:"bindEvent",value:function(e){}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-img-view{position:fixed;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:100;background:rgba(25,18,25,.9);cursor:-webkit-zoom-out;cursor:zoom-out}");var Oe="x-interact-img-view",Le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.list=t.list,this.containerId=t.containerId?"#"+t.containerId:"",this.container=this.containerId&&document.querySelector(this.containerId)||document.body,this.winHeight=window.innerHeight||document.documentElement.clientHeight,this.winWidth=window.innerWidth||document.documentElement.clientWidth}return a(e,[{key:"render",value:function(){var e=this.makeTpl(this.list);this.container.insertAdjacentHTML("beforeend",e),this.bindEvent()}},{key:"makeTpl",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t[n]||{},o=i||{},a=o.url,r=o.width,c=o.height;r>c?(r=Math.min(r,this.winWidth)-100,e="width: ".concat(r,"px")):(c=Math.min(c,this.winHeight)-100,e="height: ".concat(c,"px"));var s='\n            <div class="'.concat(Oe,'">\n                <img src="').concat(a,'" style="').concat(e,'"/>\n            </div>\n        ');return s}},{key:"destory",value:function(){xe(this.container,".".concat(Oe),"click");var e=this.container.querySelector(".".concat(Oe));e&&(e.outerHTML="")}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(Oe),"click",(function(){e.destory()}))}}]),e}(),Re="object"===("undefined"==typeof window?"undefined":n(window))&&window.self===window?navigator.userAgent:"",Pe={version:"1",imgpath:"https://mbdp03.bdstatic.com/sdks/emoticon/img/",packages:[{id:"1",name:"emoji",package_icon:"package_01.png",emoticons:[{id:"001001",text:"[微笑]",icon:"face_01.png"},{id:"001004",text:"[大笑]",icon:"face_04.png"},{id:"001005",text:"[鼓掌]",icon:"face_05.png"},{id:"001206",text:"[嘻嘻]",icon:"face_206.png"},{id:"001023",text:"[色]",icon:"face_23.png"},{id:"001025",text:"[得意]",icon:"face_25.png"},{id:"001159",text:"[挤眼]",icon:"face_159.png"},{id:"001071",text:"[滑稽]",icon:"face_71.png"},{id:"001197",text:"[困]",icon:"face_197.png"},{id:"001011",text:"[汗]",icon:"face_11.png"},{id:"001073",text:"[左捂脸]",icon:"face_73.png"},{id:"001072",text:"[捂脸]",icon:"face_72.png"},{id:"001007",text:"[笑哭]",icon:"face_07.png"},{id:"001014",text:"[发怒]",icon:"face_14.png"},{id:"001021",text:"[害羞]",icon:"face_21.png"},{id:"001194",text:"[黑线]",icon:"face_194.png"},{id:"001196",text:"[可怜]",icon:"face_196.png"},{id:"001024",text:"[舔屏]",icon:"face_24.png"},{id:"001065",text:"[打call]",icon:"face_65.png"},{id:"001003",text:"[期待]",icon:"face_03.png"},{id:"001098",text:"[亲吻]",icon:"face_98.png"},{id:"001012",text:"[抠鼻]",icon:"face_12.png"},{id:"001219",text:"[ok啊]",icon:"face_219.png"},{id:"001068",text:"[没眼看]",icon:"face_68.png"},{id:"001034",text:"[偷笑]",icon:"face_34.png"},{id:"001013",text:"[哼]",icon:"face_13.png"},{id:"001033",text:"[你懂的]",icon:"face_33.png"},{id:"001215",text:"[欧耶]",icon:"face_215.png"},{id:"001016",text:"[不高兴]",icon:"face_16.png"},{id:"001066",text:"[尬笑]",icon:"face_66.png"},{id:"001239",text:"[泪奔]",icon:"face_239.png"},{id:"001019",text:"[大哭]",icon:"face_19.png"},{id:"001020",text:"[流泪]",icon:"face_20.png"},{id:"001038",text:"[鄙视]",icon:"face_38.png"},{id:"001015",text:"[委屈]",icon:"face_15.png"},{id:"001228",text:"[挠头]",icon:"face_228.png"},{id:"001192",text:"[费解]",icon:"face_192.png"},{id:"001026",text:"[疑问]",icon:"face_26.png"},{id:"001226",text:"[苦思冥想]",icon:"face_226.png"},{id:"001027",text:"[晕]",icon:"face_27.png"},{id:"001051",text:"[爱钱]",icon:"face_51.png"},{id:"001069",text:"[嘿哈]",icon:"face_69.png"},{id:"001029",text:"[二哈]",icon:"face_29.png"},{id:"001028",text:"[大哈]",icon:"face_28.png"},{id:"001030",text:"[三哈]",icon:"face_30.png"},{id:"001217",text:"[惊恐]",icon:"face_217.png"},{id:"001241",text:"[石化]",icon:"face_241.png"},{id:"001041",text:"[衰]",icon:"face_41.png"},{id:"001042",text:"[骷髅]",icon:"face_42.png"},{id:"001018",text:"[惊哭]",icon:"face_18.png"},{id:"001009",text:"[啊]",icon:"face_09.png"},{id:"001166",text:"[生病]",icon:"face_166.png"},{id:"001037",text:"[再见]",icon:"face_37.png"},{id:"001036",text:"[哈欠]",icon:"face_36.png"},{id:"001187",text:"[并不简单]",icon:"face_187.png"},{id:"001218",text:"[社会]",icon:"face_218.png"},{id:"001216",text:"[嫌弃]",icon:"face_216.png"},{id:"001031",text:"[白眼]",icon:"face_31.png"},{id:"001002",text:"[开心]",icon:"face_02.png"},{id:"001067",text:"[坏笑]",icon:"face_67.png"},{id:"001022",text:"[亲亲]",icon:"face_22.png"},{id:"001221",text:"[撇嘴]",icon:"face_221.png"},{id:"001188",text:"[馋嘴]",icon:"face_188.png"},{id:"001203",text:"[思考]",icon:"face_203.png"},{id:"001220",text:"[耶耶耶]",icon:"face_220.png"},{id:"001191",text:"[顶]",icon:"face_191.png"},{id:"001154",text:"[感冒]",icon:"face_154.png"},{id:"001222",text:"[emmm]",icon:"face_222.png"},{id:"001044",text:"[闭嘴]",icon:"face_44.png"},{id:"001231",text:"[摸头]",icon:"face_231.png"},{id:"001209",text:"[右哼哼]",icon:"face_209.png"},{id:"001210",text:"[左哼哼]",icon:"face_210.png"},{id:"001202",text:"[失望]",icon:"face_202.png"},{id:"001017",text:"[囧]",icon:"face_17.png"},{id:"001039",text:"[抓狂]",icon:"face_39.png"},{id:"001040",text:"[咒骂]",icon:"face_40.png"},{id:"001070",text:"[前面的别走]",icon:"face_70.png"},{id:"001050",text:"[友军]",icon:"face_50.png"},{id:"001049",text:"[同上]",icon:"face_49.png"},{id:"001195",text:"[互粉]",icon:"face_195.png"},{id:"001122",text:"[加油啊]",icon:"face_122.png"},{id:"001238",text:"[呕]",icon:"face_238.png"},{id:"001189",text:"[吃瓜]",icon:"face_189.png"},{id:"001227",text:"[奥利给]",icon:"face_227.png"},{id:"001043",text:"[嘘]",icon:"face_43.png"},{id:"001224",text:"[拒绝]",icon:"face_224.png"},{id:"001225",text:"[观望]",icon:"face_225.png"},{id:"001232",text:"[nonono]",icon:"face_232.png"},{id:"001237",text:"[戳脸]",icon:"face_237.png"},{id:"001236",text:"[走你]",icon:"face_236.png"},{id:"001230",text:"[无所谓]",icon:"face_230.png"},{id:"001223",text:"[暗中观察]",icon:"face_223.png"},{id:"001190",text:"[打脸]",icon:"face_190.png"},{id:"001010",text:"[哟]",icon:"face_10.png"},{id:"001233",text:"[握草]",icon:"face_233.png"},{id:"001234",text:"[苦笑]",icon:"face_234.png"},{id:"001032",text:"[阴险]",icon:"face_32.png"},{id:"001045",text:"[呆]",icon:"face_45.png"},{id:"001168",text:"[太开心]",icon:"face_168.png"},{id:"001186",text:"[悲伤]",icon:"face_186.png"},{id:"001148",text:"[爱你]",icon:"face_148.png"},{id:"001006",text:"[悠闲]",icon:"face_06.png"},{id:"001046",text:"[什么鬼]",icon:"face_46.png"},{id:"001235",text:"[饮酒醉]",icon:"face_235.png"},{id:"001047",text:"[吐]",icon:"face_47.png"},{id:"001240",text:"[额]",icon:"face_240.png"},{id:"001229",text:"[凝视]",icon:"face_229.png"},{id:"001008",text:"[不要啊]",icon:"face_08.png"},{id:"001175",text:"[武汉加油]",icon:"face_175.png"},{id:"001048",text:"[已阅]",icon:"face_48.png"},{id:"001162",text:"[男孩儿]",icon:"face_162.png"},{id:"001163",text:"[女孩儿]",icon:"face_163.png"},{id:"001185",text:"[抱抱]",icon:"face_185.png"},{id:"001193",text:"[跪了]",icon:"face_193.png"},{id:"001204",text:"[摊手]",icon:"face_204.png"},{id:"001167",text:"[酸]",icon:"face_167.png"},{id:"001074",text:"[666]",icon:"face_74.png"},{id:"001123",text:"[勤洗手]",icon:"face_123.png"},{id:"001125",text:"[n95口罩]",icon:"face_125.png"},{id:"001207",text:"[心]",icon:"face_207.png"},{id:"001124",text:"[中国]",icon:"face_124.png"},{id:"001062",text:"[蜡烛]",icon:"face_62.png"},{id:"001055",text:"[鲜花]",icon:"face_55.png"},{id:"001156",text:"[给力]",icon:"face_156.png"},{id:"001160",text:"[礼物]",icon:"face_160.png"},{id:"001057",text:"[庆祝]",icon:"face_57.png"},{id:"001176",text:"[喜]",icon:"face_176.png"},{id:"001150",text:"[旅行]",icon:"face_150.png"},{id:"001173",text:"[围脖]",icon:"face_173.png"},{id:"001165",text:"[伤心]",icon:"face_165.png"},{id:"001060",text:"[赞同]",icon:"face_60.png"},{id:"001097",text:"[祈福]",icon:"face_97.png"},{id:"001095",text:"[双手鼓掌]",icon:"face_95.png"},{id:"001211",text:"[作揖]",icon:"face_211.png"},{id:"001200",text:"[拳头]",icon:"face_200.png"},{id:"001212",text:"[haha]",icon:"face_212.png"},{id:"001208",text:"[耶]",icon:"face_208.png"},{id:"001205",text:"[握手]",icon:"face_205.png"},{id:"001214",text:"[ok]",icon:"face_214.png"},{id:"001198",text:"[来]",icon:"face_198.png"},{id:"001201",text:"[弱]",icon:"face_201.png"},{id:"001101",text:"[加油]",icon:"face_101.png"},{id:"001213",text:"[NO]",icon:"face_213.png"},{id:"001184",text:"[good]",icon:"face_184.png"},{id:"001105",text:"[小黄鸭]",icon:"face_105.png"},{id:"001102",text:"[泡泡枪]",icon:"face_102.png"},{id:"001104",text:"[棒棒糖]",icon:"face_104.png"},{id:"001114",text:"[小老鼠]",icon:"face_114.png"},{id:"001199",text:"[喵喵]",icon:"face_199.png"},{id:"001183",text:"[猪头]",icon:"face_183.png",hideInEmojiKeyboard:!0},{id:"001053",text:"[国宝]",icon:"face_53.png"},{id:"001054",text:"[羊驼]",icon:"face_54.png"},{id:"001170",text:"[兔子]",icon:"face_170.png"},{id:"001174",text:"[围观]",icon:"face_174.png"},{id:"001118",text:"[钱袋]",icon:"face_118.png"},{id:"001079",text:"[财神]",icon:"face_79.png"},{id:"001117",text:"[灯笼]",icon:"face_117.png"},{id:"001151",text:"[点亮平安灯]",icon:"face_151.png"},{id:"001115",text:"[2020]",icon:"face_115.png",hideInEmojiKeyboard:!0},{id:"001120",text:"[舞狮]",icon:"face_120.png"},{id:"001078",text:"[鞭炮]",icon:"face_78.png"},{id:"001058",text:"[生日蛋糕]",icon:"face_58.png"},{id:"001149",text:"[奥特曼]",icon:"face_149.png"},{id:"001061",text:"[药丸]",icon:"face_61.png"},{id:"001063",text:"[鸡蛋]",icon:"face_63.png"},{id:"001155",text:"[干杯]",icon:"face_155.png"},{id:"001180",text:"[炸鸡腿]",icon:"face_180.png"},{id:"001152",text:"[肥皂]",icon:"face_152.png"},{id:"001171",text:"[威武]",icon:"face_171.png"},{id:"001157",text:"[给你小心心]",icon:"face_157.png"},{id:"001178",text:"[音乐]",icon:"face_178.png"},{id:"001082",text:"[火车]",icon:"face_82.png"},{id:"001083",text:"[飞机]",icon:"face_83.png"},{id:"001158",text:"[话筒]",icon:"face_158.png"},{id:"001182",text:"[钟]",icon:"face_182.png"},{id:"001181",text:"[照相机]",icon:"face_181.png"},{id:"001161",text:"[绿丝带]",icon:"face_161.png"},{id:"001172",text:"[微风]",icon:"face_172.png"},{id:"001169",text:"[太阳]",icon:"face_169.png"},{id:"001126",text:"[月亮]",icon:"face_126.png"},{id:"001153",text:"[浮云]",icon:"face_153.png"},{id:"001177",text:"[下雨]",icon:"face_177.png"},{id:"001164",text:"[沙尘暴]",icon:"face_164.png"},{id:"001179",text:"[赞啊]",icon:"face_179.png"},{id:"001247",text:"[雪花]",icon:"face_247.png"},{id:"001248",text:"[2021]",icon:"face_248.png"},{id:"001250",text:"[牛年大吉]",icon:"face_250.png"},{id:"001251",text:"[牛福到]",icon:"face_251.png"},{id:"001252",text:"[云红包]",icon:"face_252.png"},{id:"001253",text:"[牛洋洋]",icon:"face_253.png"},{id:"001254",text:"[牛斯拉]",icon:"face_254.png"},{id:"001255",text:"[云喝酒]",icon:"face_255.png"},{id:"001242",text:"[工人]",icon:"face_242.png",hideInEmojiKeyboard:!0},{id:"001243",text:"[农民]",icon:"face_243.png",hideInEmojiKeyboard:!0},{id:"001244",text:"[稻草人]",icon:"face_244.png",hideInEmojiKeyboard:!0},{id:"001245",text:"[锦旗]",icon:"face_245.png",hideInEmojiKeyboard:!0},{id:"001246",text:"[大红花]",icon:"face_246.png",hideInEmojiKeyboard:!0},{id:"001127",text:"[→_→]",icon:"face_127.png",hideInEmojiKeyboard:!0},{id:"001035",text:"[睡觉]",icon:"face_35.png",hideInEmojiKeyboard:!0},{id:"001056",text:"[中国加油]",icon:"face_56.png",hideInEmojiKeyboard:!0},{id:"001059",text:"[MicDrop]",icon:"face_59.png",hideInEmojiKeyboard:!0},{id:"001064",text:"[浪]",icon:"face_64.png",hideInEmojiKeyboard:!0},{id:"001075",text:"[2018]",icon:"face_75.png",hideInEmojiKeyboard:!0},{id:"001076",text:"[福]",icon:"face_76.png",hideInEmojiKeyboard:!0},{id:"001077",text:"[红包]",icon:"face_77.png",hideInEmojiKeyboard:!0},{id:"001080",text:"[饺子]",icon:"face_80.png",hideInEmojiKeyboard:!0},{id:"001081",text:"[车票]",icon:"face_81.png",hideInEmojiKeyboard:!0},{id:"001084",text:"[射门]",icon:"face_84.png",hideInEmojiKeyboard:!0},{id:"001085",text:"[红牌]",icon:"face_85.png",hideInEmojiKeyboard:!0},{id:"001086",text:"[黄牌]",icon:"face_86.png",hideInEmojiKeyboard:!0},{id:"001087",text:"[哨子]",icon:"face_87.png",hideInEmojiKeyboard:!0},{id:"001088",text:"[比分]",icon:"face_88.png",hideInEmojiKeyboard:!0},{id:"001089",text:"[啤酒]",icon:"face_89.png",hideInEmojiKeyboard:!0},{id:"001090",text:"[足球]",icon:"face_90.png",hideInEmojiKeyboard:!0},{id:"001091",text:"[大力神杯]",icon:"face_91.png",hideInEmojiKeyboard:!0},{id:"001092",text:"[锦鲤]",icon:"face_92.png",hideInEmojiKeyboard:!0},{id:"001096",text:"[火焰]",icon:"face_96.png",hideInEmojiKeyboard:!0},{id:"001099",text:"[天使]",icon:"face_99.png",hideInEmojiKeyboard:!0},{id:"001100",text:"[樱花]",icon:"face_100.png",hideInEmojiKeyboard:!0},{id:"001103",text:"[气球]",icon:"face_103.png",hideInEmojiKeyboard:!0},{id:"001106",text:"[粽子]",icon:"face_106.png",hideInEmojiKeyboard:!0},{id:"001107",text:"[70周年]",icon:"face_107.png",hideInEmojiKeyboard:!0},{id:"001108",text:"[国庆]",icon:"face_108.png",hideInEmojiKeyboard:!0},{id:"001109",text:"[国庆快乐]",icon:"face_109.png",hideInEmojiKeyboard:!0},{id:"001110",text:"[圣诞老人]",icon:"face_110.png",hideInEmojiKeyboard:!0},{id:"001111",text:"[圣诞树]",icon:"face_111.png",hideInEmojiKeyboard:!0},{id:"001112",text:"[圣诞袜]",icon:"face_112.png",hideInEmojiKeyboard:!0},{id:"001113",text:"[铃铛]",icon:"face_113.png",hideInEmojiKeyboard:!0},{id:"001119",text:"[鼠年大吉]",icon:"face_119.png",hideInEmojiKeyboard:!0},{id:"001121",text:"[戴口罩]",icon:"face_121.png",hideInEmojiKeyboard:!0},{id:"001128",text:"[⚡]",icon:"face_128.png",hideInEmojiKeyboard:!0},{id:"001129",text:"[🍉]",icon:"face_129.png",hideInEmojiKeyboard:!0},{id:"001130",text:"[🍗]",icon:"face_130.png",hideInEmojiKeyboard:!0},{id:"001131",text:"[🎄]",icon:"face_131.png",hideInEmojiKeyboard:!0},{id:"001132",text:"[👏]",icon:"face_132.png",hideInEmojiKeyboard:!0},{id:"001133",text:"[👻]",icon:"face_133.png",hideInEmojiKeyboard:!0},{id:"001134",text:"[💊]",icon:"face_134.png",hideInEmojiKeyboard:!0},{id:"001135",text:"[💣]",icon:"face_135.png",hideInEmojiKeyboard:!0},{id:"001136",text:"[💩]",icon:"face_136.png",hideInEmojiKeyboard:!0},{id:"001137",text:"[🤓]",icon:"face_137.png",hideInEmojiKeyboard:!0},{id:"001138",text:"[🤗]",icon:"face_138.png",hideInEmojiKeyboard:!0},{id:"001139",text:"[👿]",icon:"face_139.png",hideInEmojiKeyboard:!0},{id:"001140",text:"[😱]",icon:"face_140.png",hideInEmojiKeyboard:!0},{id:"001141",text:"[🙃]",icon:"face_141.png",hideInEmojiKeyboard:!0},{id:"001142",text:"[🙅]",icon:"face_142.png",hideInEmojiKeyboard:!0},{id:"001143",text:"[🙈]",icon:"face_143.png",hideInEmojiKeyboard:!0},{id:"001144",text:"[🙉]",icon:"face_144.png",hideInEmojiKeyboard:!0},{id:"001145",text:"[🙊]",icon:"face_145.png",hideInEmojiKeyboard:!0},{id:"001146",text:"[🙋]",icon:"face_146.png",hideInEmojiKeyboard:!0},{id:"001147",text:"[🙏]",icon:"face_147.png",hideInEmojiKeyboard:!0}]}]},De=m(Pe.packages,1)[0].emoticons;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;/(iPhone|iPod|iPad)/.test(e)}(),function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-rich-text{padding-top:10px;font:14px/22px PingFangSC-Regular;color:#222;text-align:justify;word-wrap:break-word;word-break:break-all;word-break:break-word}.x-interact-rich-text>a{text-decoration:none}.x-interact-rich-text .type-at,.x-interact-rich-text .type-image,.x-interact-rich-text .type-link,.x-interact-rich-text .type-topic,.x-interact-rich-text .type-video,.x-interact-rich-text .type-vote{color:#4367b4;cursor:pointer}.x-interact-rich-text .invalid-href.type-at{color:#858585;pointer-events:none}.x-interact-rich-text .type-emoji{width:14px;margin-top:-4px;background-size:100%}.x-interact-rich-text .type-emoji,.x-interact-rich-text .type-label{display:inline-block;height:14px;background-repeat:no-repeat;background-position:50% 50%;vertical-align:middle}.x-interact-rich-text .type-label{width:42px;margin-top:-2px;background-size:cover}.x-interact-rich-text .type-label-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-1.png)}.x-interact-rich-text .type-label-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-2.png)}.x-interact-rich-text-is-author{padding:0 .03rem;font-size:.1rem;color:#4d6df2;background:#e4eaff;border-radius:.03rem}.x-interact-rich-text-colon,.x-interact-rich-text-uname{color:#858585}");var Ae="x-interact-rich-text",Ne={1:"at",3:"link",4:"image"},He={1:"link",2:"video",3:"vote"},ze=["at","topic","link","video","vote"],Me=function(e){return"https://author.baidu.com/home?context=%7B%22uk%22%3A%22".concat(e,"%22%7D")},Be=(Pe||{}).imgpath||"https://mbdp03.bdstatic.com/sdks/emoticon/img/",Ke=function(e){d(n,e);var t=h(n);function n(e){return i(this,n),e.customCls="rich-text",t.call(this,e)}return a(n,[{key:"bindEvent",value:function(e){var t=this.root=e.querySelector(".".concat("rich-text",'[data-reply-id="').concat(this.replyId,'"]'));this.root&&ge(t,".type-image","click",(function(e){var t=e.target.dataset;!function(e){new Le(e).render()}({list:[{width:t.width,height:t.height,url:t.url}]})}))}}]),n}(function(){function e(t){i(this,e),this.content=t.content,this.contentRich=t.contentRich,this.replyToComment=t.replyToComment,this.hotLevel=t.hotLevel,this.replyId=t.replyId,this.getHomePage=t.getHomePage||Me,this.customCls=t.customCls||"",this.uname=t.uname,this.isAuthor=t.isAuthor,this.richTypeMap=Ne,this.showViewImgText=t.showViewImgText||!1}return a(e,[{key:"makeTpl",value:function(e){var t=this.formatRichText();return t.length?'\n            <div class="'.concat(Ae," ").concat(this.customCls,'" data-reply-id="').concat(this.replyId,'">\n                ').concat(this.uname?'<span class="'.concat(Ae,'-uname">').concat(this.uname,"</span>"):"","\n                ").concat(this.isAuthor?'<span class="'.concat(Ae,'-is-author">作者</span>'):"","\n                ").concat(this.uname||this.isAuthor?'<span class="'.concat(Ae,'-colon">:</span>'):"","\n                ").concat(t.map((function(e){return ze.indexOf(e.type)>-1?'\n                            <a\n                                class="'.concat(e.class," ").concat(e.url?"":"invalid-href",'"\n                                href="').concat(e.url,'"\n                                ').concat(e.style?"style=".concat(e.style):"","\n                            >").concat(e.text,"</a>\n                        "):'\n                        <span\n                            class="'.concat(e.class,'"\n                            ').concat(e.style?"style=".concat(e.style):"","\n                            ").concat("image"===e.type?"data-url=".concat(e.url," data-width=").concat(e.width," data-height=").concat(e.height):"","\n                        >").concat(e.text,"</span>\n                    ")})).join(""),"\n                ").concat(e||"","\n            </div>\n        "):""}},{key:"formatRichText",value:function(){var e=this,t=this.sliceByRich(this.content,this.contentRich,!this.showViewImgText);if(this.replyToComment&&this.replyToComment.length){var n=[];this.replyToComment.map((function(t){var i=t.user||{},o=i.uname,a=i.uk,r=i.is_bjh_author;n=n.concat([{type:"text",text:" // ",class:"type-text"},{type:"at",text:"@".concat(o),class:"type-at ".concat(r?"is-bjh-author":""),uk:a,url:e.getHomePage(a)},{type:"text",text:"：",class:"type-text"}],e.sliceByRich(t.content,t.content_rich,!1,t.image_list))})),t=t.concat(n)}return+this.hotLevel&&t.unshift({type:"label",text:"",class:"type-label type-label-".concat(this.hotLevel)}),t}},{key:"sliceByRich",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=[],r=0,c=o&&o.large||{};if(t&&t.length){var s=null;t.forEach((function(t){if(4==+t.type)s={type:"image",text:t.attr.text,class:"type-image",url:c.url||t.attr.url,width:c.width,height:c.height};else{r<t.start&&(a=a.concat(n.sliceByEmoji(e.slice(r,+t.start))),r=+t.start);var i=n.richTypeMap[+t.type]||"text";"link"===i&&(i=He[+t.attr.icon]||"link");var o=e.slice(+t.start,+t.start+ +t.length);a.push({type:i,text:o,class:"type-".concat(i),uk:t.attr.uk||"",url:("at"===i?n.getHomePage(t.attr.uk):t.attr.link)||""}),r+=+t.length}})),r<e.length&&(a=a.concat(this.sliceByEmoji(e.slice(r)))),!i&&s&&a.push(s)}else a=g(this.sliceByEmoji(e));return a}},{key:"sliceByEmoji",value:function(e){if(!e)return[];var t=/(\[.*?\])/;return e.split(t).filter((function(e){return e.length})).map((function(e){var n="text",i="type-text",o="",a=function(e){for(var t,n="",i=0;i<De.length;i++)if((t=De[i]).text===e){n=t.icon;break}return n}(e);return t.test(e)&&a&&(n="emoji",i="type-emoji",o="background-image:url(".concat(Be).concat(a,"?t=").concat(Math.floor(Date.now()/1e3/60/60),")"),e=""),{type:n,text:e,style:o,class:i}}))}}]),e}());!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-image{position:relative;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;border:1px solid rgba(0,0,0,.05);border-radius:12px;overflow:hidden}.x-interact-image-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-interact-image-thumb{position:relative;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;height:auto;cursor:-webkit-zoom-in;cursor:zoom-in}.x-interact-image-thumb .tag{position:absolute;right:14px;bottom:14px;font-size:14px;text-shadow:0 0 5px rgba(0,0,0,.3);color:#fff}.x-interact-image-large{position:relative;display:none;width:100%;height:auto;cursor:-webkit-zoom-out;cursor:zoom-out}");var Ue=["","GIF","长图"],qe=function(e){d(n,e);var t=h(n);function n(e){var o;return i(this,n),(o=t.call(this,l(l({},e),{},{id:e.replyId,wrapperWidth:"176px",prefixCls:"image-scale"}))).isLarge=!1,o}return a(n,[{key:"bindEvent",value:function(e){var t=this,n=e.querySelector('.image-scale[data-id="'.concat(this.id,'"]')),i=n.querySelector(".image-scale-thumb"),o=n.querySelector(".image-scale-large");ge(n,".".concat("image-scale","-thumb"),"click",(function(e){n.style.width="100%",n.style.height="auto",i.style.display="none",o.style.display="block",t.isLarge=!0})),ge(n,".".concat("image-scale","-large"),"click",(function(e){n.style.width="176px",i.style.display="block",o.style.display="none",t.isLarge=!1}))}}]),n}(function(){function e(t){i(this,e),this.container=t.container,this.thumb=t.thumb,this.large=t.large,this.type=t.type||0,this.id=t.id,this.size=t.size||"1:1",this.scale=this.getScale(this.size);var n=t.wrapperWidth;this.wrapperStyle=t.wrapperStyle||(n?"width: ".concat(n):""),this.prefixCls=t.prefixCls||"x-interact-image"}return a(e,[{key:"render",value:function(){if(this.container){var e=this.makeTpl();this.container.insertAdjacentHTML("beforeend",e)}}},{key:"makeTpl",value:function(){var e=this.thumb;if(e){var t=["padding-top: ".concat(100*this.scale,"%"),"background-image: ".concat(e?"url(".concat(e,")"):"")].join(";"),n=this.prefixCls;return'\n            <div class="'.concat("x-interact-image"," ").concat(n,'"\n                ').concat(this.id?'data-id="'.concat(this.id,'"'):"",'\n                style="').concat(this.wrapperStyle,'"\n            >\n                <div class="').concat("x-interact-image","-placeholder ").concat(n,'-placeholder"></div>\n                <div class="').concat("x-interact-image","-thumb ").concat(n,'-thumb" style="').concat(t,'">\n                    ').concat(+this.type?'<span class="tag">'.concat(Ue[+this.type],"<span>"):"","\n                </div>\n                ").concat(this.large?'<img class="'.concat("x-interact-image","-large ").concat(n,'-large" src="').concat(this.large,'"/>'):"","\n            </div>\n        ")}}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1:1",t=1,n=e.split(":")||[],i=+n[0];if(i>0){var o=+n[1]||0;t=o/i}return t}}]),e}());"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var Fe,Ve=function(e,t){return e(t={exports:{}}),t.exports}((function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,i){var o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)};e.exports={type:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},isObject:function(e,t){return t?"object"===this.type(e):e&&"object"===(void 0===e?"undefined":o(e))},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},encode:function(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")},formatParams:function(e){var t="",n=!0,i=this;return this.isObject(e)?(function e(o,a){var r=i.encode,c=i.type(o);if("array"==c)o.forEach((function(t,n){i.isObject(t)||(n=""),e(t,a+"%5B"+n+"%5D")}));else if("object"==c)for(var s in o)e(o[s],a?a+"%5B"+r(s)+"%5D":r(s));else n||(t+="&"),n=!1,t+=a+"="+r(o)}(e,""),t):e},merge:function(e,t){for(var n in t)e.hasOwnProperty(n)?this.isObject(t[n],1)&&this.isObject(e[n],1)&&this.merge(e[n],t[n]):e[n]=t[n];return e}}},,function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a="undefined"!=typeof document,r=function(){function e(t){function n(e){function t(){e.p=n=i=null}var n=void 0,i=void 0;o.merge(e,{lock:function(){n||(e.p=new Promise((function(e,t){n=e,i=t})))},unlock:function(){n&&(n(),t())},clear:function(){i&&(i("cancel"),t())}})}(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.engine=t||XMLHttpRequest,this.default=this;var i=this.interceptors={response:{use:function(e,t){this.handler=e,this.onerror=t}},request:{use:function(e){this.handler=e}}},a=i.request;n(i.response),n(a),this.config={method:"GET",baseURL:"",headers:{},timeout:0,params:{},parseJson:!0,withCredentials:!1}}return i(e,[{key:"request",value:function(e,t,n){var i=this,r=new this.engine,c="Content-Type",s=c.toLowerCase(),l=this.interceptors,d=l.request,p=l.response,u=d.handler,h=new Promise((function(l,h){function f(e){return e&&e.then&&e.catch}function m(e,t){e?e.then((function(){t()})):t()}function g(n){function i(e,t,i){m(p.p,(function(){if(e){i&&(t.request=n);var o=e.call(p,t,Promise);t=void 0===o?t:o}f(t)||(t=Promise[0===i?"resolve":"reject"](t)),t.then((function(e){l(e)})).catch((function(e){h(e)}))}))}function d(e){e.engine=r,i(p.onerror,e,-1)}function u(e,t){this.message=e,this.status=t}t=n.body,e=o.trim(n.url);var g=o.trim(n.baseURL||"");if(e||!a||g||(e=location.href),0!==e.indexOf("http")){var x="/"===e[0];if(!g&&a){var b=location.pathname.split("/");b.pop(),g=location.protocol+"//"+location.host+(x?"":b.join("/"))}if("/"!==g[g.length-1]&&(g+="/"),e=g+(x?e.substr(1):e),a){var v=document.createElement("a");v.href=e,e=v.href}}var y=o.trim(n.responseType||""),k=-1!==["GET","HEAD","DELETE","OPTION"].indexOf(n.method),w=o.type(t),_=n.params||{};k&&"object"===w&&(_=o.merge(t,_));var C=[];(_=o.formatParams(_))&&C.push(_),k&&t&&"string"===w&&C.push(t),C.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+C.join("&")),r.open(n.method,e);try{r.withCredentials=!!n.withCredentials,r.timeout=n.timeout||0,"stream"!==y&&(r.responseType=y)}catch(e){}var S=n.headers[c]||n.headers[s],E="application/x-www-form-urlencoded";for(var j in o.trim((S||"").toLowerCase())===E?t=o.formatParams(t):o.isFormData(t)||-1===["object","array"].indexOf(o.type(t))||(E="application/json;charset=utf-8",t=JSON.stringify(t)),S||k||(n.headers[c]=E),n.headers)if(j===c&&o.isFormData(t))delete n.headers[j];else try{r.setRequestHeader(j,n.headers[j])}catch(e){}r.onload=function(){try{var e=r.response||r.responseText;e&&n.parseJson&&-1!==(r.getResponseHeader(c)||"").indexOf("json")&&!o.isObject(e)&&(e=JSON.parse(e));var t=r.responseHeaders;if(!t){t={};var a=(r.getAllResponseHeaders()||"").split("\r\n");a.pop(),a.forEach((function(e){if(e){var n=e.split(":")[0];t[n]=r.getResponseHeader(n)}}))}var s=r.status,l=r.statusText,h={data:e,headers:t,status:s,statusText:l};if(o.merge(h,r._response),s>=200&&s<300||304===s)h.engine=r,h.request=n,i(p.handler,h,0);else{var f=new u(l,s);f.response=h,d(f)}}catch(f){d(new u(f.msg,r.status))}},r.onerror=function(e){d(new u(e.msg||"Network Error",0))},r.ontimeout=function(){d(new u("timeout [ "+r.timeout+"ms ]",1))},r._options=n,setTimeout((function(){r.send(k?null:t)}),0)}o.isObject(e)&&(e=(n=e).url),(n=n||{}).headers=n.headers||{},m(d.p,(function(){o.merge(n,JSON.parse(JSON.stringify(i.config)));var a=n.headers;a[c]=a[c]||a[s]||"",delete a[s],n.body=t||n.body,e=o.trim(e||""),n.method=n.method.toUpperCase(),n.url=e;var r=n;u&&(r=u.call(d,n,Promise)||n),f(r)||(r=Promise.resolve(r)),r.then((function(e){e===n?g(e):l(e)}),(function(e){h(e)}))}))}));return h.engine=r,h}},{key:"all",value:function(e){return Promise.all(e)}},{key:"spread",value:function(e){return function(t){return e.apply(null,t)}}}]),e}();r.default=r,["get","post","put","patch","head","delete"].forEach((function(e){r.prototype[e]=function(t,n,i){return this.request(t,n,o.merge({method:e},i))}})),["lock","unlock","clear"].forEach((function(e){r.prototype[e]=function(){this.interceptors.request[e]()}})),e.exports=r}])})),We=(Fe=Ve)&&Fe.__esModule&&Object.prototype.hasOwnProperty.call(Fe,"default")?Fe.default:Fe,$e=Object.prototype.hasOwnProperty,Je=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Ye=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(n[i]=e[i]);return n},Ge={arrayToObject:Ye,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],o=0;o<t.length;++o)for(var a=t[o],r=a.obj[a.prop],c=Object.keys(r),s=0;s<c.length;++s){var l=c[s],d=r[l];"object"===n(d)&&null!==d&&-1===i.indexOf(d)&&(t.push({obj:r,prop:l}),i.push(d))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var i=[],o=0;o<t.length;++o)void 0!==t[o]&&i.push(t[o]);n.obj[n.prop]=i}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",i=0;i<t.length;++i){var o=t.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(i):o<128?n+=Je[o]:o<2048?n+=Je[192|o>>6]+Je[128|63&o]:o<55296||o>=57344?n+=Je[224|o>>12]+Je[128|o>>6&63]+Je[128|63&o]:(i+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),n+=Je[240|o>>18]+Je[128|o>>12&63]+Je[128|o>>6&63]+Je[128|63&o])}return n},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,o){if(!i)return t;if("object"!==n(i)){if(Array.isArray(t))t.push(i);else{if("object"!==n(t))return[t,i];(o.plainObjects||o.allowPrototypes||!$e.call(Object.prototype,i))&&(t[i]=!0)}return t}if("object"!==n(t))return[t].concat(i);var a=t;return Array.isArray(t)&&!Array.isArray(i)&&(a=Ye(t,o)),Array.isArray(t)&&Array.isArray(i)?(i.forEach((function(i,a){$e.call(t,a)?t[a]&&"object"===n(t[a])?t[a]=e(t[a],i,o):t.push(i):t[a]=i})),t):Object.keys(i).reduce((function(t,n){var a=i[n];return $e.call(t,n)?t[n]=e(t[n],a,o):t[n]=a,t}),a)}},Xe=String.prototype.replace,Qe=/%20/g,Ze={default:"RFC3986",formatters:{RFC1738:function(e){return Xe.call(e,Qe,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},et={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},tt=Date.prototype.toISOString,nt={delimiter:"&",encode:!0,encoder:Ge.encode,encodeValuesOnly:!1,serializeDate:function(e){return tt.call(e)},skipNulls:!1,strictNullHandling:!1},it=function e(t,n,i,o,a,r,c,s,l,d,p,u){var h=t;if("function"==typeof c)h=c(n,h);else if(h instanceof Date)h=d(h);else if(null===h){if(o)return r&&!u?r(n,nt.encoder):n;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||Ge.isBuffer(h))return r?[p(u?n:r(n,nt.encoder))+"="+p(r(h,nt.encoder))]:[p(n)+"="+p(String(h))];var f,m=[];if(void 0===h)return m;if(Array.isArray(c))f=c;else{var g=Object.keys(h);f=s?g.sort(s):g}for(var x=0;x<f.length;++x){var b=f[x];a&&null===h[b]||(m=Array.isArray(h)?m.concat(e(h[b],i(n,b),i,o,a,r,c,s,l,d,p,u)):m.concat(e(h[b],n+(l?"."+b:"["+b+"]"),i,o,a,r,c,s,l,d,p,u)))}return m},ot=(Object.prototype.hasOwnProperty,function(e,t){var i=e,o=t?Ge.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var a=void 0===o.delimiter?nt.delimiter:o.delimiter,r="boolean"==typeof o.strictNullHandling?o.strictNullHandling:nt.strictNullHandling,c="boolean"==typeof o.skipNulls?o.skipNulls:nt.skipNulls,s="boolean"==typeof o.encode?o.encode:nt.encode,l="function"==typeof o.encoder?o.encoder:nt.encoder,d="function"==typeof o.sort?o.sort:null,p=void 0!==o.allowDots&&o.allowDots,u="function"==typeof o.serializeDate?o.serializeDate:nt.serializeDate,h="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:nt.encodeValuesOnly;if(void 0===o.format)o.format=Ze.default;else if(!Object.prototype.hasOwnProperty.call(Ze.formatters,o.format))throw new TypeError("Unknown format option provided.");var f,m,g=Ze.formatters[o.format];"function"==typeof o.filter?i=(m=o.filter)("",i):Array.isArray(o.filter)&&(f=m=o.filter);var x,b=[];if("object"!==n(i)||null===i)return"";x=o.arrayFormat in et?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var v=et[x];f||(f=Object.keys(i)),d&&f.sort(d);for(var y=0;y<f.length;++y){var k=f[y];c&&null===i[k]||(b=b.concat(it(i[k],k,v,r,c,s?l:null,m,d,p,u,g,h)))}var w=b.join(a),_=!0===o.addQueryPrefix?"?":"";return w.length>0?_+w:""}),at=new We;at.config.withCredentials=!0,at.config.timeout=1e4,at.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var rt=location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion=",ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.__instance;if(!t&&n&&n.show)n.show();else{var i=e.apiOpt,o=void 0===i?{}:i,a=e.successCb;delete e.apiOpt,window.__instance=n=window.passport.pop.init(l({loginVersion:"v4",apiOpt:l({loginType:1,u:window.location.href,product:"interact",staticPage:window.location.origin+"/v3Jump.html"},o),cache:!1,tangram:!0,authsite:["tqq","renren","tsina"],onLoginSuccess:function(e){a&&a(e),e.returnValue=!1,window.__instance.hide()},onSubmitStart:function(e){},onSubmitedErr:function(e){},onSystemErr:function(e){},onShow:function(e){},onRealHide:function(e){},onHide:function(e){},onDestroy:function(e){}},e)),n.show()}},st={},lt=function(){return new Promise((function(e){P.isLogin?e():(st.loginSuccessCb=function(t){var n=((t||{}).rsp||{}).data||{};P.isLogin=!0,P.curUserName=n.userName,e()},function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.passport&&window.passport.pop;n?ct(e,t):ie(rt+(new Date).getTime(),(function(){ct(e,t)}),{})}({apiOpt:{staticPage:P.passStaticPage},successCb:function(e){st.loginSuccessCb(e)}},!1))}))};function dt(e){var t={appid:P.appid,thread_id:P.threadId,parent_id:e.replyId,content:e.text,sync_text:+e.isRadioChecked,ts:Date.now(),client_type:"pc"};return new Promise((function(e,n){var i,o;(i=N.ADDREPLY,o=t,at.post(i,ot(o,{arrayFormat:"indices"}),void 0)).then((function(t){var i;!+t.errno&&t.ret?e(function(e){var t=e.sync_text_comment;return t&&(e.sync_text_comment=c(t,l(l({},t.user),{},{thread_id:e.thread_id,is_author:!0,like_count:0}))),e}(t.ret)):832==+t.errno?(P.isLogin=!1,lt(),n()):n((i=t.errno,F[i+""]||"发表失败，请稍后重试"))})).catch((function(e,t){n(K)}))}))}var pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(!y(e,"date"))throw V("d","Date",e);var n=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return t=t.replace(/(y+)/gi,(function(e,t){return n.substr(4-Math.min(4,t.length))})),Object.keys(i).forEach((function(e){t=t.replace(new RegExp("("+e+"+)","g"),(function(t,n){return i[e]<10&&n.length>1?"0"+i[e]:i[e]}))})),t};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-dialog-classic{width:224px;height:131px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-dialog-classic button{padding:0}.x-dialog-classic-msg{padding-top:30px;font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-classic-oper{padding:21px 20px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-dialog-classic .btn{width:80px;height:32px;font-size:14px;border-radius:16px;border:none;outline:none}.x-dialog-classic-cancel{color:#1f1f1f;background:#f5f5f6}.x-dialog-classic-confirm{color:#fff;background:#4e6ef2}");var ut="x-dialog-classic",ht=function(){function e(t){i(this,e),this.container=t.container,this.message=t.message||"确认做此操作吗",this.cancelText=t.cancelText||"取消",this.confirmText=t.confirmText||"确认",this.onCancel=t.onCancel,this.onConfirm=t.onConfirm,this.onClose=t.onClose,this.render(),this.bindEvent()}return a(e,[{key:"render",value:function(){var e='\n            <div class="'.concat(ut,'">\n                <h3 class="').concat(ut,'-msg">').concat(this.message,'</h3>\n                <div class="').concat(ut,'-oper">\n                    <button class="btn ').concat(ut,'-cancel">').concat(this.cancelText,'</button>\n                    <button class="btn ').concat(ut,'-confirm">').concat(this.confirmText,"</button>\n                </div>\n            </div>\n        ");this.container.innerHTML=e}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(ut,"-cancel"),"click",(function(t){C(e.onCancel)&&e.onCancel(t),e.close()})),ge(this.container,".".concat(ut,"-confirm"),"click",(function(t){C(e.onConfirm)&&e.onConfirm(t),e.close()})),this.onOtherClickBind=this.onOtherClick.bind(this),setTimeout((function(){ge(document,"html","click",e.onOtherClickBind)}),0)}},{key:"close",value:function(){xe(this.container,".".concat(ut,"-cancel"),"click"),xe(this.container,".".concat(ut,"-confirm"),"click"),xe(document,"html","click",this.onOtherClickBind),this.container.innerHTML="",C(this.onClose)&&this.onClose()}},{key:"onOtherClick",value:function(e){this.container.innerHTML&&!e.target.closest(".".concat(ut))&&this.close()}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-dialog-menu{padding:30px 24px;width:368px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-sizing:content-box;box-sizing:content-box}.x-dialog-menu-title{font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-menu-list{margin-top:8px;font-size:0}.x-dialog-menu-item{width:176px;height:32px;margin-top:12px;padding:0;font-size:14px;border-radius:16px;border:none;outline:none;color:#333;background-color:#f5f5f5}.x-dialog-menu-item:nth-child(2n){margin-left:16px}.x-dialog-menu.is-odd .x-dialog-menu-item:last-child{width:368px}.x-dialog-menu-item:hover{color:#fff;background-color:#4e6ef2}");var ft="x-dialog-menu",mt=function(){function e(t){i(this,e),this.title=t.title,this.list=t.list,this.container=t.container,this.clickCallback=t.clickCallback,this.closeCallback=t.closeCallback,this.container}return a(e,[{key:"render",value:function(){var e=this.makeTpl(this.title,this.list);this.container.insertAdjacentHTML("beforeend",e),this.bindEvent()}},{key:"makeTpl",value:function(e,t){var n=(t&&t.length||0)%2==1?"is-odd":"";return'\n            <div class="'.concat(ft," ").concat(n,'">\n                <h3 class="').concat(ft,'-title">').concat(e,'</h3>\n                <div class="').concat(ft,'-list">\n                ').concat(t.map((function(e,t){return'\n                        <button class="'.concat(ft,'-item" data-id="').concat(t,'">').concat(e.text,"</button>\n                    ")})).join(""),"\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(ft),"click",(function(t){t.preventDefault(),t.stopPropagation();var n=t.target;if(n.className==="".concat(ft,"-item")){e.close();var i=n.dataset.id,o=e.list[i];o&&C(e.clickCallback)&&e.clickCallback({item:o})}})),this.outerClkFunc=this.outerClick.bind(this),setTimeout((function(){ge(document,"html","click",e.outerClkFunc)}),0)}},{key:"close",value:function(){xe(this.container,".".concat(ft),"click"),xe(document,"html","click",this.outerClkFunc);var e=this.container.querySelector(".".concat(ft));e&&(e.outerHTML=""),C(this.closeCallback)&&this.closeCallback()}},{key:"outerClick",value:function(e){!e.target.closest(".".concat(ft))&&this.close()}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-emoj-panel{height:100%;overflow-y:auto}.x-interact-emoj-panel-wrapper{-webkit-box-sizing:border-box;box-sizing:border-box;width:443px;height:230px;line-height:0;padding:20px 6px 20px 20px;font-size:0;border-radius:12px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-interact-emoj-panel::-webkit-scrollbar{width:3px}.x-interact-emoj-panel::-webkit-scrollbar-thumb{border-radius:10px;background-color:#f2f2f2}.x-interact-emoj-panel .img-wrap{display:inline-block;margin:5px;padding:5px;border-radius:6px}.x-interact-emoj-panel .img-wrap:hover{background-color:rgba(51,136,255,.2)}.x-interact-emoj-panel .emoj-img{width:30px}");var gt="x-interact-emoj-panel",xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.options=l({containerId:gt,clickCallback:function(){}},t),this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container}return a(e,[{key:"render",value:function(){this.container.classList.add("".concat(gt,"-wrapper")),this.container.innerHTML=this.makeTpl(),this.bindEvent(this.options.clickCallback)}},{key:"makeTpl",value:function(){var e=m(Pe.packages,1)[0],t=Pe.imgpath,n=e.emoticons||[],i=pt(new Date,"yyyyMMddhh");return'\n            <div class="'.concat(gt,'">\n                ').concat(n.map((function(e){var n=e.text,o=e.icon,a=e.id;return e.hideInEmojiKeyboard?"":'\n                        <span class="img-wrap" data-text="'.concat(n,'" data-id="').concat(a,'">\n                            <img class="emoj-img" src="').concat(t).concat(o,"?r=").concat(i,'" title="').concat(n,'"/>\n                        </span>\n                    ')})).join(""),"\n            </div>\n        ")}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display="block"}},{key:"toggle",value:function(){"none"===this.container.style.display?this.show():this.hide()}},{key:"bindEvent",value:function(e){var t=this;ge(this.container,this.containerId,"click",(function(n){n.preventDefault(),n.stopPropagation();var i=n.target;if("#".concat(i.id)===t.containerId)t.hide();else{"emoj-img"===i.className&&(i=i.parentElement);var o=i.dataset,a=o.text,r=o.id;a&&C(e)&&e({text:a,id:r})}})),ge(document,"html","click",(function(e){t.hide()}))}}]),e}(),bt=function(e){var t=new xt(e);return t.render(),t},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n=n||window.innerHeight||document.documentElement.clientHeight;var i=document.documentElement.scrollTop||window.pageYOffset;return!(n+i-e.offsetTop<=t||e.offsetTop+e.clientHeight<i)};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.x-interact-publish{width:100%;font-size:13px;color:#222}.x-interact-publish-panel-center{padding-top:4px}.x-interact-publish-cont{height:94px}.x-interact-publish-cont,.x-interact-publish-cont-topic{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background:#f5f5f6;border-radius:12px}.x-interact-publish-cont-topic{min-height:94px;max-height:160px;overflow-y:auto}.x-interact-publish .text-area{padding:16px 16px 23px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f}.x-interact-publish .text-area:empty:before{content:attr(placeholder)}.x-interact-publish .text-area:focus{outline:none}.x-interact-publish .textarea-topic{padding:13px 16px 11px;min-width:200px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f;overflow:hidden;overflow-y:auto;-webkit-user-select:text;line-height:1.5;word-break:break-all;word-wrap:break-word;white-space:pre-wrap;-webkit-box-sizing:border-box;box-sizing:border-box}.x-interact-publish .textarea-topic:before,.x-interact-publish .textarea-topic:empty:before{content:attr(content);color:#4e6ef2;white-space:nowrap;word-break:break-all;padding-right:5px;line-height:1.5}.x-interact-publish .textarea-topic .placeholder-init:before{display:inline-block;content:attr(placeholder);color:#626675}.x-interact-publish .textarea-topic .placeholder-none:before{display:inline-block;content:" ";width:1px}.x-interact-publish .textarea-topic:focus{outline:none}.x-interact-publish-opt{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:30px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:8px}.x-interact-publish .emoj,.x-interact-publish .img-upload{display:inline-block;height:20px;width:20px;background-size:contain;background-repeat:no-repeat}.x-interact-publish .emoj:hover,.x-interact-publish .img-upload:hover{cursor:pointer}.x-interact-publish .emoj{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn2.png)}.x-interact-publish .emoj:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn-active2.png)}.x-interact-publish .img-upload{margin-left:30px;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn3.png)}.x-interact-publish .img-upload:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn-active3.png)}.x-interact-publish .radio{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-interact-publish .radio:hover{cursor:pointer}.x-interact-publish .radio:not(:first-child){margin-left:30px}.x-interact-publish .radio:before{content:"";display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:26px;width:26px;border:2px solid #222;border-radius:100%;-webkit-transform-origin:left;transform-origin:left;-webkit-transform:scale(.5);transform:scale(.5);margin-right:-9px}.x-interact-publish .radio.checked:before{border:none;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-radio-selected.png);background-size:contain;background-repeat:no-repeat;background-color:#4e6ef2}.x-interact-publish .no-radio .radio{display:none}.x-interact-publish .extra{position:absolute;right:90px;color:#858585}.x-interact-publish .extra .exceed{color:#f73131}.x-interact-publish .send{position:absolute;top:0;right:0;width:80px;height:30px;line-height:30px;font-size:14px;text-align:center;color:#fff;background:#4e6ef2;border-radius:6px;cursor:pointer}.x-interact-publish .send.disabled{opacity:.2;cursor:not-allowed}.x-interact-publish .emoj-panel{background:#fff}.x-interact-publish .emoj-panel.float-up{position:absolute;z-index:1}.x-interact-publish .emoj-panel.float-right{right:-16px}');var yt="x-interact-publish",kt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.options=l({containerId:yt,placeholder:"发表神评妙论",radio:{label:"同时评论原文",checked:!1},maxTextNum:300,showNumLimit:20,isEmojShow:!0,isEmojFloatUp:!1,isUploadImgShow:!1,isAllowedSendNull:!1},t);var n=this.options.topicObj||{};this.isTopic=n.isTopic,this.topicWord=n.topicWord;var o=t.actionCallback,a=t.sendCallback;this.sendCallback=C(a)?a:function(){},this.actionCallback=C(o)?o:function(){},this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container&&(this.emojPanel="",this.options.emojPanelId=this.options.isEmojShow?this.options.containerId+"_emoj_panel":"",this.imgList=[],this.options.imgListPanelId=this.options.isUploadImgShow?this.options.containerId+"_img_list_panel":"")}return a(e,[{key:"render",value:function(){this.container.innerHTML=this.makeTpl(l({},this.options)),this.setMainDom(),this.bindEvent(),this.checkRealShow(),this.isTopic&&this.getSessionStorage(),this.setExtra(this.options)}},{key:"getSessionStorage",value:function(){var e=sessionStorage.getItem("textareaHTML");e&&(this.textarea.innerHTML=e)}},{key:"setMainDom",value:function(){this.isTopic?(this.textarea=this.container.querySelector(".textarea-topic"),this.placeholderDom=this.container.querySelector(".placeholder-dom")):this.textarea=this.container.querySelector(".text-area"),this.operatorBar=this.container.querySelector(".".concat(yt,"-opt")),this.radio=this.container.querySelector(".radio"),this.radio.checked=!!this.options.radio.checked,this.extra=this.container.querySelector(".extra"),this.send=this.container.querySelector(".send"),this.body=document.querySelector("body")}},{key:"makeTpl",value:function(e){var t=e.placeholder,n=e.radio,i=void 0===n?{}:n,o=e.emojPanelId,a=e.isEmojFloatUp,r=e.imgListPanelId,c=e.isAllowedSendNull,s=e.topicObj||{},l=s.topicWord,d=s.isTopic,p='<textarea contenteditable="true" class="text-area '.concat(t?"placeholder":"",'"\n        placeholder="').concat(t,'"></textarea>'),u='<div\n            content="'.concat(l,'"\n            contenteditable="true"\n            class="textarea-topic"><span\n                class="placeholder-dom placeholder-init"\n                placeholder="').concat(t,'"></span> </div>');return'\n            <div class="'.concat(yt,'">\n                <div class="').concat(d?yt+"-cont-topic":yt+"-cont",'">\n                    ').concat(d?u:p,'\n                    <div class="other"></div>\n                </div>\n                <div class="').concat(yt,'-panel-center">\n                    ').concat(r?'<div id="'.concat(r,'"></div>'):"",'\n                </div>\n                <div class="').concat(yt,"-opt ").concat(i.label?"":"no-radio",'">\n                ').concat(o?'\n                    <span class="emoj"></span>\n                ':"","\n                ").concat(r?'\n                    <div class="img-upload"></div>\n                ':"",'\n                    <span class="radio ').concat(i.checked?"checked":"",'">').concat(i.label,'</span>\n                    <span class="extra"></span>\n                    <span class="send ').concat(c?"":"disabled",'">发表</span>\n                </div>\n                <div class="').concat(yt,'-panel-bottom">\n                    <div\n                        id="').concat(o,'"\n                        class="emoj-panel ').concat(a?"float-up":""," ").concat(d?"float-right":"",'"\n                    >\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".textarea-topic","paste",(function(t){if(e.isTopic){var n=event||window.event;n.preventDefault();var i=(n.originalEvent||n).clipboardData.getData("text/plain");document.execCommand("insertText",!1,i)}})),ge(this.body,"body","click",(function(t){if(e.isTopic){e.options.placeholder;var n=e.textarea.innerText;if(!n||" "===n||JSON.stringify(n)===JSON.stringify("\n")){e.textarea.innerHTML="",e.textarea.appendChild(e.placeholderDom);var i=document.createTextNode(" ");e.textarea.appendChild(i),e.setMainDom(),e.setExtra(e.options),sessionStorage.setItem("textareaHTML",e.textarea.innerHTML)}}e.emojPanelHide()})),ge(this.container,this.containerId,"click",(function(t){t.preventDefault(),t.stopPropagation();var n=t.target.className.trim();-1!==n.indexOf("radio")&&(n="radio"),-1!==n.indexOf("text-area")&&(n="text-area"),-1!==n.indexOf("textarea-topic")&&(n="textarea-topic");var i=e.actionCallback;switch(n){case"emoj":e.emojClk(e.options),i("publish-emoj-click");break;case"radio":e.emojPanelHide(),e.radioClk(),i("publish-radio-click",{checked:e.radio.checked});break;case"send":e.emojPanelHide(),e.sendClk(),i("publish-send-click");break;case"text-area":e.emojPanelHide(),i("publish-textarea-click");break;case"textarea-topic":var o=getSelection();e.lastEditRange=o.getRangeAt(0),e.emojPanelHide(),i("publish-textarea-click");break;case"img-upload":e.emojPanelHide(),e.pickImage();break;default:if(e.isTopic){e.textarea.focus();var a=getSelection();e.lastEditRange=a.getRangeAt(0)}e.emojPanelHide()}})),ge(this.container,".text-area","keyup",(function(t){e.setExtra(e.options)})),ge(this.container,".textarea-topic","keyup",(function(t){e.setExtra(e.options);var n=getSelection();e.lastEditRange=n.getRangeAt(0),sessionStorage.setItem("textareaHTML",e.textarea.innerHTML)})),ge(this.container,".textarea-topic","keydown",(function(t){var n=getSelection();if(13==+(window.event?t.keyCode:t.which)){var i=n.anchorNode,o=i.nodeValue,a=n.anchorOffset,r=!1,c=i.nextElementSibling,s=i.nextSibling;return(void 0===c?!s:!c)&&o&&o.length===+a&&(r=!0),r?e.insertHtml("<br><br>"):e.insertHtml("<br>"),!1}})),ge(this.container,".textarea-topic","focus",(function(t){var n=e.placeholderDom&&e.placeholderDom.parentNode;n&&n.removeChild(e.placeholderDom),sessionStorage.setItem("textareaHTML",e.textarea.innerHTML)}))}},{key:"insertHtml",value:function(e){var t,n;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var o,a,r=document.createDocumentFragment();o=i.firstChild;)a=r.appendChild(o);n.insertNode(r),a&&((n=n.cloneRange()).setStartAfter(a),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}},{key:"setTextarea",value:function(e,t){if(this.isTopic){this.textarea.focus();var n=getSelection();if(this.lastEditRange&&(n.removeAllRanges(),n.addRange(this.lastEditRange)),"#text"!=n.anchorNode.nodeName){var i=document.createTextNode(e);if(this.textarea.childNodes.length>0)for(var o=0;o<this.textarea.childNodes.length;o++)o==n.anchorOffset&&this.textarea.insertBefore(i,this.textarea.childNodes[o]);else this.textarea.appendChild(i);var a=document.createRange();a.selectNodeContents(i),a.setStart(i,i.length),a.collapse(!0),n.removeAllRanges(),n.addRange(a)}else{var r=n.getRangeAt(0),c=r.startContainer,s=r.startOffset;c.insertData(s,e),r.setStart(c,s+e.length),r.collapse(!0),n.removeAllRanges(),n.addRange(r)}this.lastEditRange=n.getRangeAt(0),sessionStorage.setItem("textareaHTML",this.textarea.innerHTML)}else{t=t||this.textarea.selectionStart;var l=this.textarea.value;l=l.slice(0,t)+e+l.slice(t),this.textarea.value=l,this.textarea.setSelectionRange(t+e.length,l.length)}}},{key:"clearTextarea",value:function(){if(this.isTopic){var e=this.options.placeholder;this.textarea.innerHTML='<span\n                class="placeholder-dom placeholder-init"\n                placeholder="'.concat(e,'"></span> '),this.setMainDom()}else this.textarea.value="";var t=this.options,n=this.radio;t.radio.label&&n&&n.checked&&(n.classList.remove("checked"),n.checked=!1),this.sendEnable()}},{key:"getTextarea",value:function(){return this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value}},{key:"setExtra",value:function(e){var t=e.maxTextNum,n=e.showNumLimit,i=t-(this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value).length,o="",a="";i<0?(o="超出",a="exceed",i=-i,this.sendEnable(!1)):(o="剩余",this.sendEnable(!0),i>n&&(i=-1)),this.extra.innerHTML=i>=0?"".concat(o,'<span class="').concat(a,'">').concat(i,"</span>字"):""}},{key:"emojClk",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.emojPanel;n?n.toggle():this.emojPanel=bt({containerId:t.emojPanelId,clickCallback:function(n){e.setTextarea(n.text),e.setExtra(t),e.actionCallback("publish-emojItem-click",{id:n.id})}})}},{key:"emojPanelHide",value:function(){var e=this.emojPanel;e&&e.hide()}},{key:"radioClk",value:function(){this.radio.classList.toggle("checked"),this.radio.checked=!this.radio.checked}},{key:"sendClk",value:function(){if(!this.send.classList.contains("disabled")){var e={text:this.getTextarea()};this.options.radio.label&&(e.isRadioChecked=this.radio.checked),this.options.isUploadImgShow&&this.imgList.length&&(e.imgList=this.imgList),C(this.sendCallback)&&this.sendCallback(e)}}},{key:"sendEnable",value:function(e){!0!==e&&!1!==e||(this.globalSendEnable=e);var t=this.isTopic?this.topicWord+this.textarea.innerText:this.textarea.value,n=this.options,i=n.isUploadImgShow,o=n.isAllowedSendNull,a=o||!o&&!!t||i&&this.imgList.length,r=!1!==this.globalSendEnable&&a?"remove":"add";this.send.classList[r]("disabled")}},{key:"hide",value:function(){this.container.style.display="none",this.getTextarea()&&this.actionCallback("publish-textarea-draft")}},{key:"show",value:function(){this.container.style.display="block"}},{key:"checkRealShow",value:function(e){var t=this.actionCallback;if(vt(this.container)&&t("publish-show"),vt(this.operatorBar)){this.options.emojPanelId&&t("publish-emoj-show");var n=this.options.radio,i=n.label,o=n.checked;i&&t("publish-radio-show",{checked:o}),e&&e()}}},{key:"pickImage",value:function(){}}]),e}(),wt=function(e){var t=new kt(e);return t.render(),t};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-toast{position:fixed;left:50%;bottom:20%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:10px;font-size:18px;color:#fff;background:rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.5);border-radius:12px}");var _t=function(){function e(){i(this,e)}return a(e,null,[{key:"show",value:function(e){var t=this;this.timer&&this.hide(),this.text=e.text,this.duration=e.duration||3e3,this.afterHide=e.afterHide,this.render(),this.timer=setTimeout((function(){t.hide()}),this.duration)}},{key:"hide",value:function(){this.el&&(this.clear(),this.changeStyle("display","none"),C(this.afterHide)&&this.afterHide())}},{key:"render",value:function(){if(this.el)this.el.innerText=this.text,this.changeStyle("display","block");else{var e=document.createElement("div");e.classList.add("x-toast"),e.innerText=this.text,this.el=e,document.body.appendChild(e)}}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"changeStyle",value:function(e,t){this.el.style[e]=t}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".interact-bar{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:8px;font-family:PingFangSC-Regular;font-size:13px;color:#9195a3}.interact-bar:hover .delete,.interact-bar:hover .report{display:block}.interact-bar>*{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-left{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.interact-bar-left .delete,.interact-bar-left .report{display:none;margin-left:10px;cursor:pointer}.interact-bar-right{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#222}.interact-bar-right .like,.interact-bar-right .reply{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-right .icon{background-repeat:no-repeat;background-size:cover;background-position:50%}.interact-bar-right .reply{cursor:pointer}.interact-bar-right .reply-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-reply.png)}.interact-bar-right .like{cursor:pointer;margin-left:16px}.interact-bar-right .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-like.png)}.interact-bar-right .like.liked{color:#f33}.interact-bar-right .like.liked .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-liked.png)}.interact-bar-right .icon{width:20px;height:20px;margin-right:3px}.interact-bar .custom-dialog{position:absolute;left:0;top:56px;z-index:1}");var Ct=$(),St=function(){function e(t){var n=this;i(this,e),this.createTime=t.createTime,this.isAuthor=t.isAuthor,this.uname=t.uname,this.isUped=!!+t.isUped,this.likeCount=+t.likeCount,this.appid=t.appid,this.threadId=t.threadId,this.replyId=t.replyId,this.onDeleteSuccess=t.onDeleteSuccess,this.onReplySuccess=t.onReplySuccess,this.actionCallback=t.actionCallback,Ct.on("closeOtherReplyPublish",(function(){n.showReplyPublish&&n.toggleReplyPublish()}))}return a(e,[{key:"makeTpl",value:function(){return'\n            <div class="'.concat("interact-bar",'" data-reply-id="').concat(this.replyId,'">\n                <div class="').concat("interact-bar",'-left">\n                    <span class="time">').concat(function(e){var t="刚刚";if(!e)return t;var n=1e3*e;e=new Date(n);var i=(Date.now()-n)/1e3,o=e.getFullYear();return(new Date).getFullYear()!==o?t=pt(e,"yyyy-MM-dd"):i>86400?t=pt(e,"MM-dd hh:mm"):i>3600?t=parseInt(i/3600,10)+"小时前":i>60&&(t=parseInt(i/60,10)+"分钟前"),t}(this.createTime),"</span>\n                    ").concat(this.isAuthor?'<span class="delete">删除</span>':'<span class="report">举报</span>','\n                </div>\n                <div class="').concat("interact-bar",'-right">\n                    <div class="reply">\n                        <i class="icon reply-icon"></i>\n                        <span class="reply-text">回复</span>\n                    </div>\n                    <div class="like ').concat(+this.isUped?"liked":"",'">\n                        <i class="icon like-icon"></i>\n                        <span class="like-text">').concat(this.likeCount?this.likeCount:"赞","</span>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(e){var t=this,n=this.root=e.querySelector(".".concat("interact-bar",'[data-reply-id="').concat(this.replyId,'"]'));ge(n,".delete","click",(function(e){t.openPanel("classic",t.onClickDelete.bind(t)),t.actionCallback("xcp-delete-click")})),ge(n,".report","click",(function(e){t.openPanel("report",t.onClickReport.bind(t)),t.actionCallback("xcp-report-click")})),ge(n,".reply","click",(function(e){t.toggleReplyPublish(),t.actionCallback("xcp-reply-click")})),ge(n,".like","click",(function(e){t.onClickUpdown(),t.actionCallback("xcp-like-click",{liked:+t.isUped})}))}},{key:"onClickDelete",value:function(){var e=this;this.deleting||(this.deleting=!0,ae({url:N.DELETE,data:{appid:this.appid,thread_id:this.threadId,reply_id:this.replyId,user_type:0,ts:Date.now(),callback:"?"},success:function(t){t&&!+t.errno?(e.root&&C(e.onDeleteSuccess)&&e.onDeleteSuccess(),e.toastCallback("xcp-delete-succ","删除成功")):832==+t.errno?(P.isLogin=!1,lt()):e.toastCallback("xcp-delete-error","删除失败，请稍后重试"),e.deleting=!1},error:function(t,n){e.toastCallback("xcp-net-error",K),e.deleting=!1}}))}},{key:"onClickReport",value:function(e){var t=this;this.reporting||lt().then((function(){t.reporting=!0,t.actionCallback("xpc-login-succ",{userName:P.curUserName,location:"report"}),ae({url:N.REPORT,data:{appid:t.appid,thread_id:t.threadId,reply_id:t.replyId,reason:e.item&&e.item.id,ts:Date.now(),callback:"?"},success:function(e){e&&!+e.errno?t.toastCallback("xcp-other-event","感谢你的举报"):832==+e.errno?(P.isLogin=!1,lt()):t.toastCallback("xcp-other-event",K),t.reporting=!1},error:function(e,n){t.toastCallback("xcp-other-event",K),t.reporting=!1}})}))}},{key:"onClickUpdown",value:function(){var e=this;this.updowning||lt().then((function(){e.updowning=!0,e.actionCallback("xpc-login-succ",{userName:P.curUserName,location:"like"}),ae({url:N.UPDOWN,data:c({appid:e.appid,thread_id:e.threadId,reply_id:e.replyId,ts:Date.now(),callback:"?"},e.isUped?{undo_type:1}:{type:1}),success:function(t){var n=t&&t.errno;0==+n?e.changeUpdownStatus(!e.isUped):897==+n?e.changeUpdownStatus(!e.isUped,!0):701==+n?e.toastCallback("xcp-other-event","点击太频繁了，休息一下吧"):832==+n?(P.isLogin=!1,lt()):e.toastCallback("xcp-other-event",K),e.updowning=!1},error:function(t,n){e.toastCallback("xcp-other-event",K),e.updowning=!1}})}))}},{key:"changeUpdownStatus",value:function(e,t){if(this.root){this.isUped=e;var n=this.root.querySelector(".like"),i=n.querySelector(".like-text");t?n.classList.add("liked"):e?(n.classList.add("liked"),i.innerText=++this.likeCount):(n.classList.remove("liked"),i.innerText=--this.likeCount,this.likeCount<=0&&(this.likeCount=0,i.innerText="赞"))}}},{key:"openPanel",value:function(e,t){var n=document.createElement("div");n.classList.add("custom-dialog"),this.root.insertAdjacentElement("beforeend",n),"classic"===e?new ht({container:n,message:"确认要删除该评论吗",onConfirm:function(){C(t)&&t()},onClose:function(){return n.parentElement.removeChild(n)}}):"report"===e?function(e){new mt(e).render()}({container:n,title:"选择举报原因",list:U,clickCallback:function(e){C(t)&&t(e)},closeCallback:function(){return n.parentElement.removeChild(n)}}):C(t)&&t()}},{key:"toggleReplyPublish",value:function(){var e=this,t="reply-".concat(this.replyId),n=this.root.querySelector(".reply-text"),i=function(){e.showReplyPublish=!1;var i=document.getElementById(t);i.parentElement.removeChild(i),n.innerText="回复"};if(this.showReplyPublish)i();else{Ct.emit("closeOtherReplyPublish"),this.showReplyPublish=!0,n.innerText="取消回复";var o=document.createElement("div");o.id=t,o.style.paddingTop="17px",this.root.insertAdjacentElement("afterEnd",o),wt({containerId:t,radio:{label:"同时评论原文",checked:!1},placeholder:"回复".concat(this.uname,":"),sendCallback:function(t){t.text&&lt().then((function(){e.actionCallback("xpc-login-succ",{userName:P.curUserName,location:"reply"}),dt(l({replyId:e.replyId},t)).then((function(t){i(),C(e.onReplySuccess)&&e.onReplySuccess(t)})).catch((function(){}))}))},actionCallback:this.actionCallback})}}},{key:"toastCallback",value:function(e,t){P.hideToast?this.actionCallback(e,t):_t.show({text:t})}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:28px;font-size:14px;color:#222}.xcp-item .left{width:64px}.is-second .xcp-item .left{width:55px}.xcp-item .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:1%}.is-second .xcp-item{padding-top:28px}");var Et=function(){function e(t){i(this,e),this.container=t.container,this.appid=t.appid,this.data=t.data||{},this.isSecond=t.isSecond||!1,this.onDeleteSuccess=t.onDeleteSuccess,this.unshiftReply=t.unshiftReply,this.syncTextComment=t.syncTextComment,this.actionCallback=t.actionCallback,this.render(),this.bindEvent()}return a(e,[{key:"render",value:function(){var e=this,t=this.data,n=document.createElement("div");n.classList.add("xcp-item"),n.dataset.replyId=t.reply_id;var i=document.createElement("div"),o=document.createElement("div");if(i.classList.add("left"),o.classList.add("right"),this.avatar=new Te({container:i,src:t.avatar,vip:t.vtype,isSmall:this.isSecond,url:q(t.uk),actionCallback:this.actionCallback}),this.userBar=new Ie({uname:t.uname,isAuthor:t.author_comment,verified:t.verified,decorations:t.decorations}),this.richText=new Ke({content:t.content,contentRich:t.content_rich,replyToComment:t.reply_to_comment,hotLevel:t.hot_level,replyId:t.reply_id}),this.interactBar=new St({createTime:t.create_time,isAuthor:t.is_author,uname:t.uname,isUped:t.is_uped,likeCount:t.like_count,appid:this.appid,threadId:t.thread_id,replyId:t.reply_id,onDeleteSuccess:function(){return e.onDeleteSuccess({target:e.container,replyCount:+t.reply_count||0})},onReplySuccess:function(t){return e.onReplySuccess(t)},actionCallback:this.actionCallback}),t.image_list){var a=t.image_list;this.imageScale=new qe({thumb:a.thumb&&a.thumb.url,large:a.large&&a.large.url,type:a.type,replyId:t.reply_id})}var r="\n            ".concat(this.userBar.makeTpl(),"\n            ").concat(this.richText.makeTpl(),"\n            ").concat(this.imageScale&&this.imageScale.makeTpl()||"","\n            ").concat(this.interactBar.makeTpl(),"\n        ");if(o.innerHTML=r,t.reply_list&&t.reply_list.length){var c=document.createElement("div");this.children=new Tt({container:c,appid:this.appid,threadId:t.thread_id,isSecond:!0,listData:t.reply_list,parentId:t.reply_id,replyCount:t.reply_count,onUpdateReplyCount:function(t){return e.onUpdateReplyCount(t)},actionCallback:this.actionCallback}),o.appendChild(c)}n.insertAdjacentElement("afterbegin",i),n.insertAdjacentElement("beforeend",o),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var e=this,t=this.container;this.richText.bindEvent(t),this.imageScale&&this.imageScale.bindEvent(t),this.interactBar.bindEvent(t),ge(t,".".concat("xcp-item"),"click",(function(t){var n=t.target;(n.closest(".".concat(e.avatar.prefixCls))||n.closest(".".concat(e.userBar.prefixCls)))&&(t.preventDefault(),t.stopPropagation(),e.actionCallback("xcp-user-click"),window.open(q(e.data.uk)))}))}},{key:"onReplySuccess",value:function(e){var t=this;if(e.sync_text_comment&&C(this.syncTextComment)&&this.syncTextComment(e.sync_text_comment),this.isSecond)C(this.unshiftReply)&&this.unshiftReply(e);else if(this.children)this.children.unshiftItem(e);else{this.data.reply_count=1,this.data.reply_list=[e];var n=document.createElement("div");this.children=new Tt({container:n,appid:this.appid,threadId:e.thread_id,isSecond:!0,listData:this.data.reply_list,parentId:this.data.reply_id,replyCount:this.data.reply_count,onUpdateReplyCount:function(e){return t.onUpdateReplyCount(e)},actionCallback:this.actionCallback}),this.container.querySelector(".right").insertAdjacentElement("beforeEnd",n),this.children.changeCommentCount({type:"++"})}}},{key:"onUpdateReplyCount",value:function(e){this.data.reply_count=e}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-list *{-webkit-box-sizing:content-box;box-sizing:content-box}.xcp-list-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-list-loader{margin-top:64px;height:42px;font:14px PingFangSC-Regular;text-align:center;line-height:42px;color:#626675;background:#f5f5f6;border-radius:6px;cursor:pointer}.xcp-list-loader.no-more{background:transparent}.xcp-list-loader.is-second{margin-top:30px;padding-left:55px;height:auto;text-align:left;font:13px/1 PingFangSC-Semibold;font-size:13px;color:#222;background:transparent}.xcp-list-loader.is-second .icon{display:inline-block;width:17px;height:13px;background-repeat:no-repeat;background-size:cover;vertical-align:middle}.xcp-list-loader.is-second .icon-up{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-up.png)}.xcp-list-loader.is-second .icon-down{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-down.png)}");var jt=$(),Tt=function(){function e(t){var n=this;i(this,e),this.container=t.container,this.appid=t.appid,this.threadId=t.threadId||"",this.source=t.source||"",this.isSecond=t.isSecond||!1,this.listData=t.listData||[],this.parentId=t.parentId||"0",this.replyCount=+t.replyCount||0,this.onUpdateReplyCount=t.onUpdateReplyCount,this.onUpdateData=t.onUpdateData,this.actionCallback=C(t.actionCallback)?t.actionCallback:function(){},this.queryConf=c({},D,{thread_id:this.threadId,appid:this.appid,use_uk:1}),this.isSecond&&(delete this.queryConf.inner_order,this.queryConf=c(this.queryConf,{num:10,use_list:0,reply_id:this.parentId,order:"9"})),this.loaderStatus={isClosed:!0},this.isSecond&&this.listData.length?(this.render(),this.loaderStatus.hasMore=this.replyCount>2,this.savedOutReplyId=this.listData.map((function(e){return e.reply_id}))):this.fetchData(),this.bindEvent(),this.isSecond||(jt.on("syncTextComment",(function(e){return n.syncTextComment(e)})),jt.on("changeCommentCount",(function(e){return n.changeCommentCount(e)})))}return a(e,[{key:"fetchData",value:function(){var e=this;this.changeLoaderStatus({isLoading:!0}),ae({url:this.isSecond?N.LIST2:N.LIST1,data:c(this.queryConf,{ts:Date.now()}),success:function(t){if(t&&!+t.errno&&t.ret){var n=t.ret||{};e.isSecond&&e.loaderStatus.isClosed&&(e.changeLoaderStatus({isClosed:!1}),n.list=n.list.filter((function(t){return-1===e.savedOutReplyId.indexOf(t.reply_id)}))),e.updateData(n),(n.list||[]).length&&e.render()}else e.changeLoaderStatus({isLoading:!1,isError:!0})},error:function(t,n){e.changeLoaderStatus({isLoading:!1,isError:!0})}})}},{key:"updateData",value:function(e){this.allData=e,this.listData=e.list||[],this.isSecond||(P.commentCount=+e.comment_count,P.isLogin=!!+e.is_login,P.userInfo=c(P.userInfo,e.userinfo),C(this.onUpdateData)&&this.onUpdateData(P.userInfo))}},{key:"render",value:function(){var e=this,t=this.root||document.createElement("div");t.classList.add("xcp-list");var n=this.list||document.createElement("div");n.classList.add("".concat("xcp-list","-list")),this.isSecond?n.classList.add("is-second"):t.insertAdjacentHTML("afterbegin",this.changeTitle()),this.listData.map((function(t){var i=document.createElement("div");new Et({container:i,appid:e.appid,data:t,isSecond:e.isSecond,onDeleteSuccess:function(t){return e.deleteItem(t)},unshiftReply:function(t){return e.unshiftItem(t)},syncTextComment:function(t){return e.syncTextComment(t)},actionCallback:e.actionCallback}),n.appendChild(i)})),!this.list&&t.appendChild(n),t.insertAdjacentHTML("beforeend",this.changeLoaderStatus({isLoading:!1,isError:!1,hasMore:this.allData&&!+this.allData.is_over})),!this.root&&this.container.insertAdjacentElement("beforeend",t),this.root=t,this.list=n}},{key:"makeTplTitle",value:function(e){var t=e;void 0===t&&(t=this.allData&&+this.allData.comment_count),this.actionCallback("xcp-cmtcount-change",{count:t});var n="评论列表";return t>0&&(n+="（".concat(t,"条）")),'<h2 class="'.concat("xcp-list",'-title">').concat(n,"</h2>")}},{key:"changeTitle",value:function(e){var t=this.container.querySelector(".".concat("xcp-list","-title"));return t?(t.outerHTML=this.makeTplTitle(e),""):this.makeTplTitle(e)}},{key:"makeTplLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.loaderStatus=c(this.loaderStatus,e),n="",i="",o="";return this.isSecond?(i+="is-second",t.isClosed&&this.replyCount<=2?n="":t.isClosed&&this.replyCount>2?(n="全部".concat(this.replyCount,"条回复"),o+="icon-down"):t.hasMore?(n="查看全部回复",o+="icon-down"):(n="收起",o+="icon-up")):t.isLoading?n=H:t.isError?n=z:t.hasMore?n=M:(n=B,i+="no-more"),n?'\n            <div\n                class="'.concat("xcp-list","-loader ").concat(i,'"\n                data-parent-id="').concat(this.parentId,'"\n            >\n                <span>').concat(n,"</span>\n                ").concat(this.isSecond?'<i class="icon '.concat(o,'"></i>'):"","\n            </div>\n        "):""}},{key:"changeLoaderStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.container.querySelector(".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'));return t?(t.outerHTML=this.makeTplLoader(e),""):this.makeTplLoader(e)}},{key:"closeList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.container.querySelector(".".concat("xcp-list","-list"));t.children.length>e;)t.removeChild(t.lastElementChild);this.queryConf.start=0,this.changeLoaderStatus({isClosed:!0,hasMore:!0})}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'),"click",(function(t){!e.isSecond||e.loaderStatus.hasMore?!e.loaderStatus.isLoading&&e.loaderStatus.hasMore&&(e.loaderStatus.isError||(e.queryConf.start+=e.isSecond&&e.loaderStatus.isClosed?0:e.queryConf.num),e.actionCallback("xcp-loader-click",{isSecond:e.isSecond}),e.fetchData()):e.closeList()}))}},{key:"changeCommentCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isSecond)jt.emit("changeCommentCount",e);else{var t,n=e.count,i=e.type;t="number"==typeof n?this.allData.comment_count=n:"--"===i?--this.allData.comment_count:++this.allData.comment_count,P.commentCount=t,this.changeTitle(t)}}},{key:"afterDeleteItem",value:function(e){this.changeCommentCount(this.isSecond?{type:"--"}:{count:+this.allData.comment_count-1-e}),this.isSecond&&(this.replyCount--,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"deleteItem",value:function(e){this.list&&(this.list.removeChild(e.target),this.afterDeleteItem(e.replyCount),this.isSecond||this.list.children.length||!this.root||(this.root.outerHTML="",this.root=null,this.list=null))}},{key:"afterUnshiftItem",value:function(){this.changeCommentCount({type:"++"}),this.isSecond&&(this.replyCount++,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"unshiftItem",value:function(e){var t=this;if(!this.isSecond&&!this.list)return this.listData=[e],P.commentCount=this.allData.comment_count=1,void this.render();var n=document.createElement("div");new Et({container:n,appid:this.appid,data:e,isSecond:this.isSecond,onDeleteSuccess:function(e){return t.deleteItem(e)},actionCallback:this.actionCallback}),this.list.insertAdjacentElement("afterBegin",n),this.afterUnshiftItem()}},{key:"syncTextComment",value:function(e){this.isSecond?jt.emit("syncTextComment",e):this.unshiftItem(e)}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-publish{padding-bottom:20px}.xcp-publish-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-publish-main{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:20px}.xcp-publish-main .left{padding-top:23px;width:64px}.xcp-publish-main .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}");var It="xcp-publish",Ot=function(){function e(t){i(this,e),this.container=t.container,this.avatarSrc=P.userInfo&&P.userInfo.avatar,this.onPublishSuccess=t.onPublishSuccess,this.actionCallback=C(t.actionCallback)?t.actionCallback:function(){},this.render()}return a(e,[{key:"render",value:function(){var e=this,t=document.createElement("div");t.classList.add(It);var n=document.createElement("div");n.classList.add("".concat(It,"-main"));var i=document.createElement("div");i.classList.add("left"),this.avatar=new Te({container:i,src:this.avatarSrc});var o=document.createElement("div"),a="".concat(It,"-main-right_").concat(Date.now());o.id=a,o.classList.add("right"),n.insertAdjacentElement("beforeEnd",i),n.insertAdjacentElement("beforeEnd",o),t.insertAdjacentHTML("afterBegin",'<h2 class="'.concat(It,'-title">发表评论</h2>')),t.insertAdjacentElement("beforeEnd",n),this.container.insertAdjacentElement("afterBegin",t),this.publish=wt({containerId:a,radio:{label:""},sendCallback:function(t){delete t.isRadioChecked,t&&t.text&&lt().then((function(){e.actionCallback("xpc-login-succ",{userName:P.curUserName,location:"publish"}),dt(t).then((function(t){P.hideToast?e.actionCallback("xcp-publish-succ","发表成功"):_t.show({text:"发表成功"}),C(e.onPublishSuccess)&&e.onPublishSuccess(t),e.publish.clearTextarea()})).catch((function(t){P.hideToast?e.actionCallback("xcp-publish-error",t):_t.show({text:t})}))})).catch((function(){}))},actionCallback:this.actionCallback})}},{key:"updateData",value:function(e){this.avatarSrc=e.avatar,this.avatar.updateSrc({src:this.avatarSrc})}},{key:"checkRealShow",value:function(e){this.publish.checkRealShow(e)}}]),e}(),Lt=decodeURIComponent,Rt=new RegExp("%[a-f0-9]{2}","gi"),Pt=new RegExp("(%[a-f0-9]{2})+","gi");function Dt(e,t){try{return Lt(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Dt(n),Dt(i))}function At(e){try{return Lt(e)}catch(o){for(var t=e.match(Rt),n=1;n<t.length;n++)t=(e=Dt(t,n).join("")).match(Rt);return e}}var Nt=function(e){if("string"!=typeof e)throw V("encodedURI","string",e);try{return e=e.replace(/\+/g," "),Lt(e)}catch(n){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=Pt.exec(e);n;){try{t[n[0]]=Lt(n[0])}catch(e){var i=At(n[0]);i!==n[0]&&(t[n[0]]=i)}n=Pt.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var r=o[a];e=e.replace(new RegExp(r,"g"),t[r])}return e}(e)}},Ht=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.split("?"),i=n[1]?n[1]:n[0],o=i.split("&"),a={};return o.forEach((function(e){if((e=e.split("="))[0].length>0){var n="";try{n=(t?Nt(e[1]):decodeURIComponent(e[1]))||""}catch(e){}a[e[0]]=n}})),a},zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("?"),i=m(n,2),o=i[0],a=i[1],r=void 0===a?"":a;return{url:o,query:t?Ht(r):r}};function Mt(e,t){for(var n in t)_(t[n])||E(t[n])?(_(t[n])&&!_(e[n])&&(e[n]={}),E(t[n])&&!E(e[n])&&(e[n]=[]),Mt(e[n],t[n])):w(t[n])||(e[n]=t[n])}function Bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return j(e)&&(e=n.shift()),n.forEach((function(t){Mt(e,t)})),e}var Kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var o=zt(t);if(0===(t=o.url).indexOf("//")){var a=location.protocol;"http:"!==a&&(a="https:"),t=a+t}this.url=t;var r=n.globalData||{};this._default=c(o.query||{},r),this._data={},this._before=n.before}return a(e,[{key:"setGlobalData",value:function(e){return _(e)&&Bt(this._default,e),this}},{key:"mark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!_(e))throw V("data","object",e);return _(e)&&c(this._mdata,e),this}},{key:"_send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!_(e))throw V("data","object",e);var n=new Image(1,1),i="_xbox_mt_".concat(Y());window[i]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,window[i]=n=null},e=Bt({},this._default,e);var o=this._before;if(!t&&C(o)){var a=o(e);if(!1===a)return this;w(a)||(_(a)||S(a))&&(e=a)}var r="".concat(this.url,"?").concat(S(e)?e:ee(e,!0));return n.src=r+"&_rnd="+Y(),this}},{key:"send",value:function(e){return this._send(this._data,e),delete this._mdata,this._mdata={},this}},{key:"report",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!_(e))throw V("data","object",e);return this._send(e,t)}}]),e}(),Ut="object"===("undefined"==typeof window?"undefined":n(window))&&window.self===window?navigator.userAgent:"",qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut;"main"===e&&(e="");var n=/ (baiduboxapp|biduboxapp)\//i;if(!1===n.test(t))return!1;var i=t.match(n),o=i[1];return!!~t.indexOf("".concat(e," ").concat(o))},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut;"main"===e&&(e="");var n=/\bbdapp\/\d+\.\d+\s+\((\w+);\s*(\w+)\)/;if(""===e){var i=/\s(lite|pro|info|mission)\sbaiduboxapp\//.exec(t);if(i)return!0;if(/\bbdapp\/\d+\.\d+\s/.test(t))return!0}else if(!1===e){var o=t.match(n);if(o&&o[1])return!0}else{if(new RegExp(new RegExp("\\s".concat(e,"\\sbaiduboxapp/"))).test(t))return!0;var a=t.match(n);if(a&&a[1]&&a[1]===e)return!0}return!1},Vt="object"===("undefined"==typeof window?"undefined":n(window))&&window.self===window?navigator.userAgent:"";function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt;"main"===e&&(e="");var i,o="0";return"object"===("undefined"==typeof window?"undefined":n(window))&&window.baiduboxapp_version?baiduboxapp_version:((qt(e,t)||Ft(e,t))&&((i=/(baiduboxapp|baiduboxvision)\/([\d.]+)/.exec(t))?o=i[2]:(i=/([\d+.]+)_(?:diordna|enohpi)_/.exec(t))&&(o=(i=i[1].split(".")).reverse().join("."))),o)}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vt;if((e=e||Wt(t,n))&&"string"==typeof e){var i=/\d+\.\d+/.exec(e);if(i)return i[0]}return 0}var Jt=Ht(location.search),Yt=navigator.userAgent,Gt=function(e){d(n,e);var t=h(n);function n(e){i(this,n);var o={};return Jt.uid&&Jt.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach((function(e){Jt[e]&&(o[e]=Jt[e])})),t.call(this,e?"https://mbd.baidu.com/ztbox":"https://mbd.baidu.com/tcbox",{globalData:l(l({},o),{},{service:"bdbox",action:e||"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:qt("lite")?10001:qt("info")?10002:Ft("tomas")?12117:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{boxV:$t(),ref:Jt.ref||"",gmv:Jt.vmgdb||"",source:Jt.from||Jt.ref||"",boxVersion:Wt(),boxPlatform:Yt.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}})})}return a(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),i=t[0],o=t[1],a=_(o)?o:{};return a.data={},a.data.cateid=i,f(p(n.prototype),"setGlobalData",this).call(this,a)}},{key:"pv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),i=t[0],o=t[1],a={actionid:"1",actiondata:{url:i||location.href}};return o&&(a.actiondata.u=o),f(p(n.prototype),"report",this).call(this,{data:a})}},{key:"event",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,4),i=t[0],o=t[1],a=void 0===o?"":o,r=t[2],c=void 0===r?"":r,s=t[3];if(!i)throw"monitor.tc.event need a evtName";var l={};if(_(a)&&!c)for(var d in l={evtName:i},a)l[d]=a[d];else l={evtName:i,evtType:a,evtTag:c};var u={actionid:"2",actiondata:l};return s&&(u.cateid=s),f(p(n.prototype),"report",this).call(this,{data:u})}},{key:"newEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),i=t[0],o=t[1],a={actionid:"2",actiondata:i};return o&&(a.cateid=o),f(p(n.prototype),"report",this).call(this,{data:a})}}]),n}(Kt),Xt=new Gt,Qt="visible"===(document.visibilityState||document.webkitVisibilityState),Zt=function(e){Qt?requestAnimationFrame(e):setTimeout(e,15)},en=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Xt[e].apply(Xt,n)},tn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=this&&this!==window?this:Xt;if("complete"!==document.readyState){var a=function t(){Zt((function(){o[e].apply(o,n)})),window.removeEventListener("load",t)};window.addEventListener("load",a)}else Zt((function(){o[e].apply(o,n)}))};function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return/(Android);?[\s/]+([\d.]+)?/.test(e)}function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return/(iPhone|iPod|iPad)/.test(e)}var an=Wt()||"",rn=an.split(".").slice(0,2).join(".")||"",cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return on(e)?"ios":nn(e)?"android":"unknown"}()||"",sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.id,o=e.flow,a=void 0===o?"":o,r=e.action;delete e.action,delete e.id,delete e.flow;var s=t.from,l=void 0===s?"":s,d=t.page,p=void 0===d?"":d,u=t.source,h=void 0===u?"":u,f=t.ext,m=void 0===f?{}:f,g=t.logId,x=void 0===g?"11414":g;m=e.ext?c({},m,e.ext):m,delete e.ext;var b={id:i||x,type:0,content:c({boxVersion:an,boxV:rn,platform:cn,from:l,type:"",page:p,source:h,value:"",ext:m},e)};a&&(b.flow=a),"zpblog"===r?tn.call(new Gt("zpblog"),"newEvent",[b,99]):n?tn("newEvent",[b,99]):en("newEvent",[b,99])},ln={},dn=1,pn=Date.now(),un=!1,hn=function(e){var t=e||{},n=t.source,i=t.nid,o=t.tid,a=t.isLogin;ln={from:"comment",page:"comment_module",source:n,value:+a,ext:{nid:""+i,topicid:""+o,num:P.commentCount}}},fn=function(e,t){vt(t,340,P.winHeight)&&("hide"===e?sn(l(l({},ln),{},{type:"comment_duration",ext:{time:String(Date.now()-pn)},value:P.isLogin})):("show"===e&&(dn++,pn=Date.now(),un=!1),!un&&sn(l(l({},ln),{},{type:"comment_show",ext:{count:dn},value:P.isLogin?+P.isLogin:ln.value})),un=!0))},mn=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};switch(e){case"publish-emoj-show":t="emoji_button_show";break;case"publish-radio-show":t=n.checked?"forward_show_1":"forward_show_0";break;case"publish-emoj-click":t="emoji_button_clk";break;case"publish-radio-click":t=n.checked?"forward_success":"forward_cancel";break;case"publish-send-click":t="publish_button";break;case"publish-textarea-click":t="input_box_clk";break;case"publish-emojItem-click":t="emoji_id_clk",i={id:n.id};break;case"publish-textarea-draft":t="publish_comment_draft";break;case"xcp-user-click":t="user_name_clk";break;case"xcp-like-click":t=n.liked?"praise_clk":"praise_cancel_clk ";break;case"xcp-delete-click":t="delete_clk";break;case"xcp-reply-click":t="reply_clk";break;case"xcp-report-click":t="report_clk";break;case"xcp-loader-click":t=n.isSecond?"view_replyall_clk":"view_all_clk"}t&&sn(l(l({},ln),{},{type:t,ext:i,value:P.isLogin?+P.isLogin:ln.value}))};!function(e){var t=window.Element.prototype;"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!=typeof t.closest&&(t.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}();var gn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.options=l({source:"xbox-comment-pc",isNeedPublish:!0,openBrowserLimit:!0},n),this.container=document.getElementById(this.options.containerId);var o=this.options.tid;if(this.options.openBrowserLimit&&!P.isHigherBrowser||!o)this.container&&(this.container.style.display="none");else{var a=this.options,r=a.appid,c=a.source,s=a.isNeedPublish,d=a.staticPage,p=a.actionCallback,u=a.hideToast,h=void 0!==u&&u;this.appid=P.appid=r||"22862035",this.threadId=P.threadId=o,this.source=c,this.isNeedPublish=s,this.actionCallback=C(p)?p:function(){},P.passStaticPage=d,P.hideToast=h,hn(this.options),this.render(),setTimeout((function(){fn("first",t.container)}),100),this.bindEvent()}}return a(e,[{key:"render",value:function(){var e=this;if(this.isNeedPublish){var t=document.createElement("div");this.container.appendChild(t),this.publish=new Ot({container:t,onPublishSuccess:function(t){e.list.unshiftItem(t)},actionCallback:function(t,n){mn(t,n),e.actionCallback(t,n)}})}var n=document.createElement("div");this.list=new Tt({container:n,appid:this.appid,threadId:this.threadId,source:this.source,onUpdateData:function(t){e.publish&&e.publish.updateData(t)},actionCallback:function(t,n){mn(t,n),e.actionCallback(t,n)}}),this.container.appendChild(n)}},{key:"bindEvent",value:function(){var e=this,t=!1;C(this.publish.checkRealShow)&&this.publish.checkRealShow,window.addEventListener("scroll",(function(){fn("scroll",e.container),t||C(e.publish.checkRealShow)&&e.publish.checkRealShow((function(){t=!0}))}),!1),function(e){var t=e.showCb,n=e.hiddenCb;t=t||e.show,n=n||e.hidden||e.hide;var i="",o="";void 0!==document.visibilityState?(i="visibilityState",o="visibilitychange"):void 0!==document.webkitVisibilityState&&(i="webkitVisibilityState",o="webkitvisibilitychange"),o&&document.addEventListener(o,(function(){"visible"===document[i]?t&&t():n&&n()}),!1)}({showCb:function(){fn("show",e.container),t=!1,C(e.publish.checkRealShow)&&e.publish.checkRealShow()},hiddenCb:function(){fn("hide",e.container)}})}}]),e}();t.CommentPc=gn,t.default=function(e){return new gn(e)},Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n("6109"))}}]);
//# sourceMappingURL=1.434721fd.js.map